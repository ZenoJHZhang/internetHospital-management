(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4d4f"],{EmVA:function(t,e,o){"use strict";o.d(e,"e",function(){return a}),o.d(e,"b",function(){return n}),o.d(e,"f",function(){return s}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return l}),o.d(e,"d",function(){return c});var r=o("t3Un");function a(t,e,o,a){return Object(r.a)({url:"/managementDoctor/listDoctorByNameOrNumberWithDepartmentId",method:"post",params:{doctorMessage:t,departmentId:e,pageNumber:o,pageSize:a}})}function n(t){return Object(r.a)({url:"/managementDoctor/getDoctorById",method:"get",params:{doctorId:t}})}function s(t){return Object(r.a)({url:"/managementDoctor/updateDoctor",method:"post",data:t})}function i(t){return Object(r.a)({url:"/managementDoctor/insertDoctor",method:"post",data:t})}function l(t){return Object(r.a)({url:"/managementDoctor/deleteDoctor",method:"post",params:{doctorId:t}})}function c(t,e){return Object(r.a)({url:"/img/insertDoctorImg",method:"post",data:t,params:{doctorId:e}})}},JLmY:function(t,e,o){"use strict";e.a={getDay:function(t,e){var o=new Date,r=o.getTime(),a=864e5*t;o.setTime(parseInt(r+a));var n=o.getFullYear(),s=(o.getMonth()+1).toString();s.length<=1&&(s="0"+s);var i=o.getDate().toString();return i.length<=1&&(i="0"+i),n+e+s+e+i}}},MvBy:function(t,e,o){"use strict";o.d(e,"f",function(){return a}),o.d(e,"h",function(){return n}),o.d(e,"d",function(){return s}),o.d(e,"b",function(){return i}),o.d(e,"e",function(){return l}),o.d(e,"g",function(){return c}),o.d(e,"c",function(){return d}),o.d(e,"a",function(){return u});var r=o("t3Un");function a(t,e){return Object(r.a)({url:"/managementNormalSchedule/list",method:"post",params:{departmentId:t,scheduleTime:e}})}function n(t,e,o){return Object(r.a)({url:"/managementNormalSchedule/update",method:"post",params:{scheduleDepartmentId:t,timeInterval:e,totalNumber:o}})}function s(t,e,o,a){return Object(r.a)({url:"/managementNormalSchedule/insert",method:"post",params:{departmentId:t,scheduleTime:e,timeInterval:o,totalNumber:a}})}function i(t,e){return Object(r.a)({url:"/managementNormalSchedule/delete",method:"post",params:{scheduleDepartmentId:t,timeInterval:e}})}function l(t,e){return Object(r.a)({url:"/managementExpertSchedule/list",method:"post",params:{departmentId:t,scheduleTime:e,type:1}})}function c(t,e,o){return Object(r.a)({url:"/managementExpertSchedule/update",method:"post",params:{scheduleDoctorId:t,timeInterval:e,totalNumber:o}})}function d(t,e,o,a,n){return Object(r.a)({url:"/managementExpertSchedule/insert",method:"post",params:{departmentId:t,doctorId:e,scheduleTime:o,timeInterval:a,totalNumber:n}})}function u(t,e){return Object(r.a)({url:"/managementExpertSchedule/delete",method:"post",params:{scheduleDoctorId:t,timeInterval:e}})}},TIhl:function(t,e,o){},uRCV:function(t,e,o){"use strict";o.r(e);var r=o("4d7F"),a=o.n(r),n=o("JLmY"),s=o("EmVA"),i=o("MvBy"),l={data:function(){return{doctorId:16,departmentId:0,doctorMessage:"",pageNumber:1,pageSize:4,total:1,doctorList:[],confirmDeleteVisible:!1,doctor:"",pickerOption:{disabledDate:function(t){var e=new Date,o=e.setDate(e.getDate()+7);return t<=new Date||t>=o}},scheduleTime:"",tableData:[{}],todayScheduleDoctorDtoList:[],noDoctor:!1,insertTable:[{}]}},mounted:function(){this.$nextTick(function(){this.scheduleTime=n.a.getDay(1,"-"),this.listExpert()})},methods:{getDoctorDetail:function(){var t=this,e=this.doctorId;return null==e&&this.$router.push({name:"ScheduleManagement"}),new a.a(function(o,r){Object(s.b)(e).then(function(e){t.doctor=e.data.returnData,t.doctorDepartmentList=t.doctor.departmentList,o(e)}).catch(function(t){r(t)})})},listExpert:function(){var t=this,e=this.$route.query.departmentId;null==e?this.$router.push({name:"ScheduleManagement"}):this.departmentId=e,Object(i.e)(this.departmentId,this.scheduleTime).then(function(e){if(200===e.data.returnCode){var o=e.data.returnData;t.todayScheduleDoctorDtoList=o.todayScheduleDoctorDtoList,0===t.todayScheduleDoctorDtoList.length?t.noDoctor=!0:(t.doctorId=t.todayScheduleDoctorDtoList[0].doctorId,t.getDoctorDetail(),t.todayScheduleDoctorDtoList.forEach(function(e){0!==e.length&&(t.$set(e,"show",!1),t.$set(e,"time",[]))}))}})},handleDelete:function(t,e){var o=this;Object(i.a)(e.scheduleDoctorId,e.timeInterval).then(function(t){200===t.data.returnCode&&(o.$store.state.errorTokenVisible=!0,o.$store.state.errorTokenMessage="专家科室排班删除成功！",o.listExpert())})},updateScheduleDoctor:function(t){var e=this;void 0===t.totalNumber||void 0===t.timeInterval?(this.$store.state.errorTokenVisible=!0,this.$store.state.errorTokenMessage="请将排班信息填写完整"):Object(i.g)(t.scheduleDoctorId,t.timeInterval,t.totalNumber).then(function(t){200===t.data.returnCode&&(e.$store.state.errorTokenVisible=!0,e.$store.state.errorTokenMessage="专家科室排班更新成功！",e.listExpert())})},filterTimeInterval:function(t){for(var e=[{value:"上午",label:"上午"},{value:"下午",label:"下午"},{value:"晚上",label:"晚上"}],o=function(o){t.scheduleDoctorDtoList.forEach(function(t){t.timeInterval===e[o].value&&e.splice(o,1)})},r=0;r<e.length;r++)o(r);this.$set(t,"time",e)},toggle:function(t){t.show=!t.show,this.filterTimeInterval(t)},insertExpert:function(t){var e=this,o=void 0,r=this.insertTable[0].totalNumber,a=this.insertTable[0].timeInterval;void 0===r||void 0===a?(this.$store.state.errorTokenVisible=!0,this.$store.state.errorTokenMessage="请将排班信息填写完整"):0!==t.scheduleDoctorDtoList.length?(o=t.scheduleDoctorDtoList[0].scheduleDoctorId,Object(i.g)(o,a,r).then(function(t){200===t.data.returnCode&&(e.$store.state.errorTokenVisible=!0,e.$store.state.errorTokenMessage="专家科室排班新增成功！",e.listExpert())})):Object(i.c)(this.departmentId,this.doctorId,this.scheduleTime,a,r).then(function(t){200===t.data.returnCode&&(e.$store.state.errorTokenVisible=!0,e.$store.state.errorTokenMessage="专家科室排班新增成功！",e.listExpert())}),this.insertTable=[{}]},changeDoctor:function(t){this.doctorId=t.doctorId,this.getDoctorDetail()}}},c=(o("zwEb"),o("KHd+")),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-container",[o("el-aside",{staticStyle:{"padding-top":"50px","margin-left":"5%"},attrs:{width:"50%"}},[o("span",{staticStyle:{"font-weight":"700","margin-right":"50px"}},[t._v("排班日期")]),t._v(" "),o("el-date-picker",{attrs:{"picker-options":t.pickerOption,align:"right",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},on:{change:t.listExpert},model:{value:t.scheduleTime,callback:function(e){t.scheduleTime=e},expression:"scheduleTime"}}),t._v(" "),o("div",[t.noDoctor?o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"30px"},attrs:{shadow:"hover"}},[t._v("暂无医生")]):t._e()],1),t._v(" "),t.noDoctor?t._e():o("div",t._l(t.todayScheduleDoctorDtoList,function(e,r){return o("div",{key:r},[o("div",{on:{click:function(o){t.changeDoctor(e)}}},[o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"30px"},attrs:{shadow:"hover"}},[o("div",{staticStyle:{"font-weight":"700","margin-left":"10px","margin-bottom":"10px"}},[o("span",[t._v(t._s(e.doctorName))]),t._v(" "),e.scheduleDoctorDtoList.length<3?o("el-button",{staticStyle:{"margin-left":"70%"},attrs:{type:"primary"},on:{click:function(o){t.toggle(e)}}},[t._v("新增排班")]):t._e()],1),t._v(" "),o("el-table",{staticStyle:{width:"760px"},attrs:{data:e.scheduleDoctorDtoList,stripe:""}},[o("el-table-column",{attrs:{prop:"timeInterval",label:"时段",width:"150"}}),t._v(" "),o("el-table-column",{attrs:{prop:"totalNumber",label:"号源数",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{type:"number",step:"1",min:"1"},model:{value:e.row.totalNumber,callback:function(o){t.$set(e.row,"totalNumber",o)},expression:"scope.row.totalNumber"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){t.updateScheduleDoctor(e.row)}}},[t._v("更新排班")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.$index,e.row)}}},[t._v("删除排班")])]}}])})],1),t._v(" "),e.show?o("div",[o("div",{staticStyle:{"font-weight":"700","margin-top":"20px"}},[t._v("新增排班信息填写")]),t._v(" "),o("el-table",{staticStyle:{width:"760px","margin-top":"20px"},attrs:{data:t.insertTable,stripe:""}},[o("el-table-column",{attrs:{prop:"timeInterval",label:"时段",width:"300"},scopedSlots:t._u([{key:"default",fn:function(r){return[o("el-select",{model:{value:r.row.timeInterval,callback:function(e){t.$set(r.row,"timeInterval",e)},expression:"scope.row.timeInterval"}},t._l(e.time,function(t){return o("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"totalNumber",label:"号源数",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{type:"number",step:"1",min:"1"},model:{value:e.row.totalNumber,callback:function(o){t.$set(e.row,"totalNumber",o)},expression:"scope.row.totalNumber"}})]}}])})],1),t._v(" "),o("el-button",{staticStyle:{"margin-top":"20px","margin-left":"50px"},attrs:{type:"primary"},on:{click:function(o){t.insertExpert(e)}}},[t._v("确认添加")]),t._v(" "),o("el-button",{on:{click:function(o){t.toggle(e)}}},[t._v("取消")])],1):t._e()],1)],1)])}))],1),t._v(" "),o("el-main",{staticStyle:{"text-align":"center","margin-top":"20px",padding:"30px","margin-left":"5%","margin-right":"5%"}},[t.noDoctor?t._e():o("div",[o("el-card",{attrs:{"body-style":{padding:"0px",height:"360px"},shadow:"hover"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",{staticStyle:{"font-weight":"700","font-size":"18px"}},[t._v(t._s(t.doctor.doctorName))])]),t._v(" "),o("el-row",{staticStyle:{"padding-top":"40px","padding-left":"25%"}},[o("el-col",[o("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.doctor.imgPath}})])],1),t._v(" "),o("el-row",[o("el-col",{staticClass:"title",attrs:{span:8}},[o("div",[t._v("医生工号")])]),t._v(" "),o("el-col",{staticClass:"detail",attrs:{span:14}},[o("div",[t._v(t._s(t.doctor.doctorNumber))])])],1),t._v(" "),o("el-row",{staticClass:"row-style"},[o("el-col",{staticClass:"title",attrs:{span:8}},[o("div",[t._v("医生职称")])]),t._v(" "),o("el-col",{staticClass:"detail",attrs:{span:14}},[o("div",[t._v(t._s(t.doctor.doctorTitle))])])],1),t._v(" "),o("el-row",{staticClass:"row-style"},[o("el-col",{staticClass:"title",attrs:{span:8}},[o("div",[t._v("医生擅长")])]),t._v(" "),o("el-col",{staticClass:"detail",attrs:{span:14}},[o("div",[t._v(t._s(t.doctor.goodAt))])])],1),t._v(" "),o("el-row",{staticClass:"row-style"},[o("el-col",{staticClass:"title",attrs:{span:8}},[o("div",[t._v("医生手机号")])]),t._v(" "),o("el-col",{staticClass:"detail",attrs:{span:14}},[o("div",[t._v(t._s(t.doctor.phone))])])],1),t._v(" "),o("el-row",{staticClass:"row-style"},[o("el-col",{staticClass:"title",attrs:{span:8}},[o("div",[t._v("医生身份证号")])]),t._v(" "),o("el-col",{staticClass:"detail",attrs:{span:14}},[o("div",[t._v(t._s(t.doctor.doctorIdCard))])])],1),t._v(" "),o("el-row",{staticClass:"row-style"},[o("el-col",{staticClass:"title",attrs:{span:8}},[o("div",[t._v("医生所属科室")])]),t._v(" "),o("el-col",{staticClass:"detail",attrs:{span:14}},[o("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:20}},t._l(t.doctor.departmentList,function(e,r){return o("el-col",{key:r,attrs:{span:12}},[t._v(t._s(e.departmentName))])}))],1)],1)],1)],1)])],1)],1)},[],!1,null,null,null);d.options.__file="expertDepartmentSchedule.vue";e.default=d.exports},zwEb:function(t,e,o){"use strict";var r=o("TIhl");o.n(r).a}}]);