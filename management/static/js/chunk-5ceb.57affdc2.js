(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ceb"],{"+uZp":function(e,t,r){"use strict";r.r(t);var a=r("Do8I"),n=(r("201c"),{components:{"my-upload":r("C03Y").a},data:function(){return{departmentForm:{departmentName:"",departmentNumber:"",introduce:"",phone:"",deptType:"",price:"1.00",id:"",imgPath:"https://www.woniuyiliao.cn/image/department/ff74c676-984e-4c7c-972f-28b94a3be1bb.png"},rules:{departmentName:[{required:!0,message:"请输入科室类型",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],departmentNumber:[{required:!0,message:"请输入科室编号",trigger:"change"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入科室手机号",trigger:"change"},{pattern:"^((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|166|198|199|(147))\\d{8}$",message:"手机号格式错误",trigger:"blur"}],deptType:[{required:!0,message:"请选择科室类型",trigger:"change"}],price:[{required:!0,message:"请输入科室挂号价格",trigger:"change"}]},show:!1,imgDataUrl:"",changeImgFlag:!1}},mounted:function(){this.$nextTick(function(){})},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.changeImgFlag||(t.departmentForm.imgId=1);var r={imgStr:""};t.changeImgFlag&&t.$set(r,"imgStr",t.imgDataUrl);/^([1-9][0-9]*(\.\d{1,2})?)|(0\.\d{1,2})$/.test(t.departmentForm.price)?Object(a.c)(t.departmentForm).then(function(e){200===e.data.returnCode&&(t.changeImgFlag?Object(a.d)(r,e.data.returnData).then(function(e){200===e.data.returnCode&&(t.$store.state.errorTokenVisible=!0,t.$store.state.errorTokenMessage="新增科室成功！",t.$router.push({name:"DeparmentManagement"}))}):(t.$store.state.errorTokenVisible=!0,t.$store.state.errorTokenMessage="新增科室成功！",t.$router.push({name:"DeparmentManagement"})))}):t.$message({message:"科室挂号价格需大于0",type:"error"})})},toggleShow:function(){this.show=!this.show},cropSuccess:function(e,t){this.imgDataUrl=e,this.changeImgFlag=!0},goBack:function(){this.$router.push({name:"DeparmentManagement"})}}}),m=r("KHd+"),o=Object(m.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-main",[r("el-form",{ref:"departmentForm",staticClass:"demo-departmentForm",staticStyle:{width:"50%"},attrs:{model:e.departmentForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"科室图片",prop:"departmentImg"}},[r("my-upload",{attrs:{width:160,height:110,field:"img","img-format":"png","with-credentials":"","no-circle":""},on:{"crop-success":e.cropSuccess},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),e._v(" "),r("img",{attrs:{src:""!=e.imgDataUrl?e.imgDataUrl:e.departmentForm.imgPath}}),e._v(" "),r("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.toggleShow}},[e._v("选择科室示例图")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室名称",prop:"departmentName"}},[r("el-input",{attrs:{max:"400"},model:{value:e.departmentForm.departmentName,callback:function(t){e.$set(e.departmentForm,"departmentName",t)},expression:"departmentForm.departmentName"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室编号",prop:"departmentNumber"}},[r("el-input",{attrs:{max:"400"},model:{value:e.departmentForm.departmentNumber,callback:function(t){e.$set(e.departmentForm,"departmentNumber",t)},expression:"departmentForm.departmentNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"科室介绍",prop:"introduce"}},[r("el-input",{attrs:{rows:3,type:"textarea"},model:{value:e.departmentForm.introduce,callback:function(t){e.$set(e.departmentForm,"introduce",t)},expression:"departmentForm.introduce"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室电话",prop:"phone"}},[r("el-input",{attrs:{max:"400"},model:{value:e.departmentForm.phone,callback:function(t){e.$set(e.departmentForm,"phone",t)},expression:"departmentForm.phone"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室类型",prop:"deptType"}},[r("el-radio-group",{model:{value:e.departmentForm.deptType,callback:function(t){e.$set(e.departmentForm,"deptType",t)},expression:"departmentForm.deptType"}},[r("el-radio",{attrs:{label:0}},[e._v("普通科室")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("专家科室")])],1)],1),e._v(" "),r("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"挂号价格",prop:"price"}},[r("el-input",{attrs:{max:"400"},model:{value:e.departmentForm.price,callback:function(t){e.$set(e.departmentForm,"price",t)},expression:"departmentForm.price"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("departmentForm")}}},[e._v("立即新增")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:function(t){e.goBack()}}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,null,null);o.options.__file="insertDepartment.vue";t.default=o.exports},Do8I:function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"b",function(){return m}),r.d(t,"f",function(){return o}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return p}),r.d(t,"a",function(){return s});var a=r("t3Un");function n(e,t,r,n){return Object(a.a)({url:"/managementDepartment/listDepartmentByNameOrNumberWithDepartmentMessage",method:"post",params:{departmentMessage:e,departmentType:t,pageNumber:r,pageSize:n}})}function m(e){return Object(a.a)({url:"/managementDepartment/getDepartmentById",method:"get",params:{departmentId:e}})}function o(e){return Object(a.a)({url:"/managementDepartment/updateDepartment",method:"post",data:e})}function i(e,t){return Object(a.a)({url:"/img/insertDepartmentImg",method:"post",data:e,params:{departmentId:t}})}function p(e){return Object(a.a)({url:"/managementDepartment/insertDepartment",method:"post",data:e})}function s(e){return Object(a.a)({url:"/managementDepartment/deleteDepartment",method:"post",params:{departmentId:e}})}}}]);