(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1f3a"],{Do8I:function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"b",function(){return m}),r.d(t,"f",function(){return o}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return p}),r.d(t,"a",function(){return s});var a=r("t3Un");function n(e,t,r,n){return Object(a.a)({url:"/managementDepartment/listDepartmentByNameOrNumberWithDepartmentMessage",method:"post",params:{departmentMessage:e,departmentType:t,pageNumber:r,pageSize:n}})}function m(e){return Object(a.a)({url:"/managementDepartment/getDepartmentById",method:"get",params:{departmentId:e}})}function o(e){return Object(a.a)({url:"/managementDepartment/updateDepartment",method:"post",data:e})}function i(e,t){return Object(a.a)({url:"/img/insertDepartmentImg",method:"post",data:e,params:{departmentId:t}})}function p(e){return Object(a.a)({url:"/managementDepartment/insertDepartment",method:"post",data:e})}function s(e){return Object(a.a)({url:"/managementDepartment/deleteDepartment",method:"post",params:{departmentId:e}})}},UqOk:function(e,t,r){"use strict";r.r(t);var a=r("4d7F"),n=r.n(a),m=r("Do8I"),o=(r("201c"),{components:{"my-upload":r("C03Y").a},data:function(){return{departmentForm:{departmentName:"",departmentNumber:"",introduce:"",phone:"",deptType:0,price:"",id:"",imgPath:""},rules:{departmentName:[{required:!0,message:"请输入科室名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],departmentNumber:[{required:!0,message:"请输入科室编号",trigger:"change"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入科室手机号",trigger:"change"},{pattern:"^((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|166|198|199|(147))\\d{8}$",message:"手机号格式错误",trigger:"blur"}],deptType:[{required:!0,message:"请选择科室类型",trigger:"change"}],price:[{required:!0,message:"请输入科室挂号价格",trigger:"change"}]},show:!1,imgDataUrl:"",changeImgFlag:!1}},mounted:function(){this.$nextTick(function(){this.getDepartmentDetail()})},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var r={imgStr:""};t.changeImgFlag&&t.$set(r,"imgStr",t.imgDataUrl),Object(m.f)(t.departmentForm).then(function(e){200===e.data.returnCode&&(t.changeImgFlag?Object(m.d)(r,e.data.returnData).then(function(e){200===e.data.returnCode&&(t.$store.state.errorTokenVisible=!0,t.$store.state.errorTokenMessage="更新科室成功！",t.$router.go(-1))}):(t.$store.state.errorTokenVisible=!0,t.$store.state.errorTokenMessage="更新科室成功！",t.$router.go(-1)))})})},getDepartmentDetail:function(){var e=this,t=this.$route.query.departmentId;return null==t&&this.$router.push({name:"DeparmentManagement"}),new n.a(function(r,a){Object(m.b)(t).then(function(t){e.departmentForm=t.data.returnData,r(t)}).catch(function(e){a(e)})})},toggleShow:function(){this.show=!this.show},cropSuccess:function(e,t){this.imgDataUrl=e,this.changeImgFlag=!0},goBack:function(){this.$router.push({name:"DeparmentManagement"})}}}),i=r("KHd+"),p=Object(i.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-main",[r("el-form",{ref:"departmentForm",staticStyle:{width:"50%"},attrs:{model:e.departmentForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"科室图片",prop:"departmentImg"}},[r("span",{staticStyle:{"margin-left":"20px"}},[r("my-upload",{attrs:{width:160,height:110,field:"img","img-format":"png","with-credentials":"","no-circle":""},on:{"crop-success":e.cropSuccess},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1),e._v(" "),r("img",{attrs:{src:""!=e.imgDataUrl?e.imgDataUrl:e.departmentForm.imgPath}}),e._v(" "),r("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.toggleShow}},[e._v("选择科室示例图")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室名称",prop:"departmentName"}},[r("el-input",{attrs:{max:"400"},model:{value:e.departmentForm.departmentName,callback:function(t){e.$set(e.departmentForm,"departmentName",t)},expression:"departmentForm.departmentName"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室编号",prop:"departmentNumber"}},[r("el-input",{attrs:{max:"400"},model:{value:e.departmentForm.departmentNumber,callback:function(t){e.$set(e.departmentForm,"departmentNumber",t)},expression:"departmentForm.departmentNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"科室介绍",prop:"introduce"}},[r("el-input",{attrs:{rows:3,type:"textarea"},model:{value:e.departmentForm.introduce,callback:function(t){e.$set(e.departmentForm,"introduce",t)},expression:"departmentForm.introduce"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室电话",prop:"phone"}},[r("el-input",{attrs:{max:"400"},model:{value:e.departmentForm.phone,callback:function(t){e.$set(e.departmentForm,"phone",t)},expression:"departmentForm.phone"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"科室类型",prop:"deptType"}},[r("el-radio-group",{model:{value:e.departmentForm.deptType,callback:function(t){e.$set(e.departmentForm,"deptType",t)},expression:"departmentForm.deptType"}},[r("el-radio",{attrs:{label:0}},[e._v("普通科室")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("专家科室")])],1)],1),e._v(" "),r("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"挂号价格",prop:"price"}},[r("el-input",{attrs:{max:"400",type:"number",step:"0.1"},model:{value:e.departmentForm.price,callback:function(t){e.$set(e.departmentForm,"price",t)},expression:"departmentForm.price"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("departmentForm")}}},[e._v("立即更新")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:function(t){e.goBack()}}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,null,null);p.options.__file="editDepartment.vue";t.default=p.exports}}]);