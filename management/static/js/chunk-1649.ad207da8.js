(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1649"],{bcVp:function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([o]).join("\n")}return[n].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],i=c[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(r(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var a=[],o=0;o<n.parts.length;o++)a.push(r(n.parts[o]));c[n.id]={id:n.id,refs:1,parts:a}}}}function o(){var e=document.createElement("style");return e.type="text/css",u.appendChild(e),e}function r(e){var t,n,i=document.querySelector("style["+g+'~="'+e.id+'"]');if(i){if(m)return p;i.parentNode.removeChild(i)}if(h){var r=f++;i=l||(l=o()),t=a.bind(null,i,r,!1),n=a.bind(null,i,r,!0)}else i=o(),t=function(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),v.ssrId&&e.setAttribute(g,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function a(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var d=n(8),c={},u=s&&(document.head||document.getElementsByTagName("head")[0]),l=null,f=0,m=!1,p=function(){},v=null,g="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n,o){m=n,v=o||{};var r=d(e,t);return i(r),function(t){for(var n=[],o=0;o<r.length;o++){var a=r[o],s=c[a.id];s.refs--,n.push(s)}t?i(r=d(e,t)):r=[];for(var o=0;o<n.length;o++){var s=n[o];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete c[s.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,n,i,o,r){var a,s=e=e||{},d=typeof e.default;"object"!==d&&"function"!==d||(a=e,s=e.default);var c,u="function"==typeof s?s.options:s;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId=o),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=c):i&&(c=i),c){var l=u.functional,f=l?u.render:u.beforeCreate;l?(u._injectStyles=c,u.render=function(e,t){return c.call(t),f(e,t)}):u.beforeCreate=f?[].concat(f,c):[c]}return{esModule:a,exports:s,options:u}}},function(e,t,n){"use strict";var i=n(9);t.a={name:"vue-waterfall-easy",components:{alink:i.a},props:{width:{type:Number},height:{type:[Number,String]},reachBottomDistance:{type:Number,default:20},loadingDotCount:{type:Number,default:3},loadingDotStyle:{type:Object},gap:{type:Number,default:20},mobileGap:{type:Number,default:8},maxCols:{type:Number,default:5},imgsArr:{type:Array,required:!0},srcKey:{type:String,default:"src"},hrefKey:{type:String,default:"href"},imgWidth:{type:Number,default:240},isRouterLink:{type:Boolean,default:!1},linkRange:{type:String,default:"card"},loadingTimeOut:{type:Number,default:500},cardAnimationClass:{type:[String],default:"default-card-animation"},enablePullDownEvent:{type:Boolean,default:!1}},data:function(){return{msg:"this is from vue-waterfall-easy.vue",isMobile:!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),isPreloading:!0,isPreloading_c:!0,imgsArr_c:[],loadedCount:0,cols:NaN,imgBoxEls:null,beginIndex:0,colsHeightArr:[],LoadingTimer:null,isFirstLoad:!0,over:!1}},computed:{colWidth:function(){return this.imgWidth+this.gap},imgWidth_c:function(){return this.isMobile?window.innerWidth/2-this.mobileGap:this.imgWidth},hasLoadingSlot:function(){return!!this.$scopedSlots.loading}},mounted:function(){var e=this;this.bindClickEvent(),this.loadingMiddle(),this.preload(),this.cols=this.calcuCols(),this.$on("preloaded",function(){e.isFirstLoad=!1,e.imgsArr_c=e.imgsArr.concat([]),e.$nextTick(function(){e.isPreloading=!1,e.imgBoxEls=e.$el.getElementsByClassName("img-box"),e.waterfall()})}),this.isMobile||this.width||this.response(),this.isMobile&&this.enablePullDownEvent&&this.pullDown(),this.scroll()},watch:{isPreloading:function(e,t){var n=this;e?setTimeout(function(){n.isPreloading&&(n.isPreloading_c=!0)},this.loadingTimeOut):this.isPreloading_c=!1},imgsArr:function(e,t){(this.imgsArr_c.length>e.length||this.imgsArr_c.length>0&&e[0]&&!e[0]._height)&&this.reset(),this.preload()}},methods:{preload:function(e,t){var n=this;this.imgsArr.forEach(function(e,t){if(!(t<n.loadedCount)){if(!e[n.srcKey])return n.imgsArr[t]._height="0",void(++n.loadedCount==n.imgsArr.length&&n.$emit("preloaded"));var i=new Image;i.src=e[n.srcKey],i.onload=i.onerror=function(e){n.loadedCount++,n.imgsArr[t]._height="load"==e.type?Math.round(n.imgWidth_c/(i.width/i.height)):n.isMobile?n.imgWidth_c:n.imgWidth,"error"==e.type&&(n.imgsArr[t]._error=!0,n.$emit("imgError",n.imgsArr[t])),n.loadedCount==n.imgsArr.length&&n.$emit("preloaded")}}})},calcuCols:function(){var e=this.width?this.width:window.innerWidth,t=parseInt(e/this.colWidth);return t=0===t?1:t,this.isMobile?2:t>this.maxCols?this.maxCols:t},waterfall:function(){if(this.imgBoxEls){var e,t,n,i=this.isMobile?this.imgBoxEls[0].offsetWidth:this.colWidth;0==this.beginIndex&&(this.colsHeightArr=[]);for(var o=this.beginIndex;o<this.imgsArr.length;o++){if(!this.imgBoxEls[o])return;if(n=this.imgBoxEls[o].offsetHeight,o<this.cols)this.colsHeightArr.push(n),e=0,t=o*i;else{var r=Math.min.apply(null,this.colsHeightArr),a=this.colsHeightArr.indexOf(r);e=r,t=a*i,this.colsHeightArr[a]=r+n}this.imgBoxEls[o].style.left=t+"px",this.imgBoxEls[o].style.top=e+"px"}this.beginIndex=this.imgsArr.length}},response:function(){var e=this;window.addEventListener("resize",function(){var t=e.cols;e.cols=e.calcuCols(),t!==e.cols&&(e.beginIndex=0,e.waterfall(),e.over&&e.setOverTipPos())})},scrollFn:function(){var e=this.$refs.scrollEl;if(!this.isPreloading){var t=Math.min.apply(null,this.colsHeightArr);e.scrollTop+e.offsetHeight>t-this.reachBottomDistance&&(this.isPreloading=!0,this.$emit("scrollReachBottom"))}},scroll:function(){this.$refs.scrollEl.addEventListener("scroll",this.scrollFn)},waterfallOver:function(){this.$refs.scrollEl.removeEventListener("scroll",this.scrollFn),this.isPreloading=!1,this.over=!0,this.setOverTipPos()},setOverTipPos:function(){var e=this,t=Math.max.apply(null,this.colsHeightArr);this.$nextTick(function(){e.$refs.over.style.top=t+"px"})},bindClickEvent:function(){var e=this;this.$el.querySelector(".vue-waterfall-easy").addEventListener("click",function(t){var n=t.target;if(-1===t.target.className.indexOf("over")&&-1==n.className.indexOf("img-box")){for(;-1==n.className.indexOf("img-inner-box");)n=n.parentNode;var i=n.getAttribute("data-index");e.$emit("click",t,{index:i,value:e.imgsArr_c[i]})}})},pullDown:function(){var e,t=this,n=this.$el.querySelector(".vue-waterfall-easy-scroll");n.addEventListener("touchmove",function(i){if(0===n.scrollTop){var o=i.changedTouches[0];e||(e=o.pageY);var r=o.pageY-e;r>0&&i.preventDefault(),t.$emit("pullDownMove",r)}}),n.addEventListener("touchend",function(i){0===n.scrollTop&&(e=NaN,t.$emit("pullDownEnd"))})},loadingMiddle:function(){var e=this.$el.querySelector(".vue-waterfall-easy-scroll"),t=e.offsetWidth-e.clientWidth;this.$el.querySelector(".loading").style.marginLeft=-t/2+"px"},reset:function(){this.imgsArr_c=[],this.beginIndex=0,this.loadedCount=0,this.isFirstLoad=!0,this.isPreloading=!0,this.scroll(),this.over=!1}}}},function(e,t,n){"use strict";t.a={name:"alink",props:["to"],data:function(){return{msg:"this is from alink.vue"}},methods:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(13),r=!1,a=n(2),s=function(e){r||n(6)},d=a(i.a,o.a,!1,s,"data-v-ded6b974",null);d.options.__file="src\\vue-waterfall-easy\\vue-waterfall-easy.vue",t.default=d.exports},function(e,t,n){var i=n(7);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("5fd04388",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vue-waterfall-easy-container[data-v-ded6b974] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy-scroll[data-v-ded6b974] {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    -webkit-overflow-scrolling: touch;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy[data-v-ded6b974] {\n    position: absolute;\n    width: 100%;\n}\n@-webkit-keyframes show-card-data-v-ded6b974 {\n0% {\n    -webkit-transform: scale(0.5);\n            transform: scale(0.5);\n}\n100% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n@keyframes show-card-data-v-ded6b974 {\n0% {\n    -webkit-transform: scale(0.5);\n            transform: scale(0.5);\n}\n100% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n.vue-waterfall-easy-container .vue-waterfall-easy > .img-box[data-v-ded6b974] {\n      position: absolute;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      width: 50%;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy > .img-box.default-card-animation[data-v-ded6b974] {\n      -webkit-animation: show-card-data-v-ded6b974 0.4s;\n              animation: show-card-data-v-ded6b974 0.4s;\n      -webkit-transition: left 0.6s, top 0.6s;\n      transition: left 0.6s, top 0.6s;\n      -webkit-transition-delay: 0.1s;\n              transition-delay: 0.1s;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy a[data-v-ded6b974] {\n      display: block;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy a.img-inner-box[data-v-ded6b974] {\n      -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n      border-radius: 4px;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy .__err__ .img-wraper[data-v-ded6b974] {\n      background-image: url(data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk1M0JCM0QwNkVFNDExRThCNTJCQUQ2RDFGQzg0NzIxIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk1M0JCM0NGNkVFNDExRThCNTJCQUQ2RDFGQzg0NzIxIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTYwRUMyMDE2RUUzMTFFOEJCRTU5RTFDODg1ODgwMjYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTYwRUMyMDI2RUUzMTFFOEJCRTU5RTFDODg1ODgwMjYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCACRAJEDASIAAhEBAxEB/8QAZQAAAwEBAQAAAAAAAAAAAAAAAAIDAQQHAQEAAAAAAAAAAAAAAAAAAAAAEAACAQMDBAEFAAMBAAAAAAAAAQIRMQMhQRJRYYEycZHBIkITsdFSYhEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9AAAAAMFnNQWt9kAwkssVbV9CTnKb10XQVtLSyAd5ZuzURW27yfhmX9RlDI+wD4Vf/ZVi41SKCdeNI3YEnOXJtOiBZZr/wBGcMi2Ft7AXjli76PoOcqael0Mpyg9NV0A6QEhNTWl90MBoAAAAAAGGiTlxjXfZAZkycdEqyI3q26sOrd92CTm6bbsA1boh1i3lqPGKiqIZAYklYHY0x6tIDY2B3NdjEBgNJ3NACTxbx0E1TozoYsoqSowI2o06MtjyctGqSItODptsw6NX2YHSaJCXKNd90OAAAAYznnLnJvZWK5pUjRXloiNdwCjk0l9S0YqKohcSpGrvLUcDUBLK23x23FWNtVSAuHch/KXQP5PoBdqq77GJ1XfczFVKjVBcuPk6rXqBQCH8n0D+UugFwZD+bV1oNif5OOzQDyipKjI0cW0/qXYmVVjVXjqAkZcHXZ3OhHNXcthlWNHeOjAoAABDLKs6bISlWl1Busm+42Jfm30At2BmI1gRy+3gpD1XwTy+3gpH1QDASyt8uKdFuJRw1iwOjdBKy+TIutGbK3kAAxtJNuwiywdmA7s/glj9/BV04unQli9l8AWDsBjAhSja6D4pUnTZmZV+afUVOkk+4HUBgAc0bD4v2+fsJGw+L9vn7AVQMEDAjl9vBSHqvgnl9vBSHqvgDJwbfJC8JPSlEO5wTo3qMnUDEqNGz0jXoD08BRSXyBB/m6u2xvFPQ1qjoDAVNxqv1ZuJUnT5BGw9/AFQYAwJZf1+fsJKw+X9fn7CSsB0AAAc7VG13GxP82uoZFSbezFWkkwOgGCBgRy15adDZTaioq7QZPfwZQDFFfPc2MnB0vE1AwCc+WituPjaS4kzU6agPkS9hEVeqJJU0AAh7+ACHv4AqAAwI5X+aXQVKrS7g3WTY2ONZp7IC9AAAJ5lWNf+dSV1XqdL1VGc8lxk47bAUxyqqO60GIpuL5LyuxZNNVVtmAmVfkpbbi1RYAI1QVRYAI1QJ1aRYzdAbJ8Y1I1RZggI1SNxL8uW1NCoAYxckqKiu9Bm0lV23ZFtyfJ+F2Ayyr0K4VSNf8ArUnFcpKO250LRUQABoAYLkhzXdWHMA5u26uNGXF9tx8uOusfYlbTcC6aaqrdTTnTlHVfQrHJF6PRsBwAAC5i9vg0xbgaAIAAxtJVduosskVotWiTcpav6ANKXJ9the27sF9NyuLHTWXsA2OHBd3cYDQAAAAAAAwSeNS1syhgHNRxdJfUK10ujoaTuJLCrp0Amm1Ztdhv6z3Sfkxwmu4leqoBT+1P1f8AkZy4469daEaopllRqPRAH9ZOyp5Fbbu2+xmuyGUJvsAtaaWQUcnSP1Kxwq7dR0krALDGo63Y4GgAAAAAAAAAAAAAAAAAshJ7AAGK6B3YABsNx4gADAAAAAAAAAAAAAf/2Q==);\n      background-repeat: no-repeat;\n      background-position: center;\n      background-size: 50% 50%;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy .__err__ .img-wraper img[data-v-ded6b974] {\n        display: none;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy a.img-wraper > img[data-v-ded6b974] {\n      width: 100%;\n      display: block;\n      border: none;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy .over[data-v-ded6b974] {\n      position: absolute;\n      width: 100%;\n      text-align: center;\n      font-size: 12px;\n      line-height: 1.6;\n      color: #aaa;\n}\n.vue-waterfall-easy-container > .loading.first[data-v-ded6b974] {\n    bottom: 50%;\n    -webkit-transform: translate(-50%, 50%);\n            transform: translate(-50%, 50%);\n}\n.vue-waterfall-easy-container > .loading[data-v-ded6b974] {\n    position: absolute;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    bottom: 6px;\n    z-index: 999;\n}\n@-webkit-keyframes ball-beat-data-v-ded6b974 {\n50% {\n    opacity: 0.2;\n    -webkit-transform: scale(0.75);\n            transform: scale(0.75);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n@keyframes ball-beat-data-v-ded6b974 {\n50% {\n    opacity: 0.2;\n    -webkit-transform: scale(0.75);\n            transform: scale(0.75);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n.vue-waterfall-easy-container > .loading.ball-beat > .dot[data-v-ded6b974] {\n      vertical-align: bottom;\n      background-color: #4b15ab;\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n      margin: 3px;\n      -webkit-animation-fill-mode: both;\n              animation-fill-mode: both;\n      display: inline-block;\n      -webkit-animation: ball-beat-data-v-ded6b974 0.7s 0s infinite linear;\n              animation: ball-beat-data-v-ded6b974 0.7s 0s infinite linear;\n}\n.vue-waterfall-easy-container > .loading.ball-beat > .dot[data-v-ded6b974]:nth-child(2n-1) {\n      -webkit-animation-delay: 0.35s;\n              animation-delay: 0.35s;\n}\n",""])},function(e,t){e.exports=function(e,t){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],a=r[0],s=r[1],d=r[2],c=r[3],u={id:e+":"+o,css:s,media:d,sourceMap:c};i[a]?i[a].parts.push(u):n.push(i[a]={id:a,parts:[u]})}return n}},function(e,t,n){"use strict";var i=n(4),o=n(12),r=!1,a=n(2),s=function(e){r||n(10)},d=a(i.a,o.a,!1,s,null,null);d.options.__file="src\\vue-waterfall-easy\\components\\alink.vue",t.a=d.exports},function(e,t,n){var i=n(11);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("75b4b0a0",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"",""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{staticClass:"alink",attrs:{href:e.to,target:"_blank"}},[e._t("default")],2)};i._withStripped=!0;var o={render:i,staticRenderFns:[]};t.a=o},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-waterfall-easy-container",style:{width:e.width&&!e.isMobile?e.width+"px":"",height:parseFloat(e.height)==e.height?e.height+"px":e.height}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreloading_c,expression:"isPreloading_c"}],staticClass:"loading ball-beat",class:{first:e.isFirstLoad}},[e._t("loading",null,{isFirstLoad:e.isFirstLoad}),e._l(e.loadingDotCount,function(t){return e.hasLoadingSlot?e._e():n("div",{staticClass:"dot",style:e.loadingDotStyle})})],2),n("div",{ref:"scrollEl",staticClass:"vue-waterfall-easy-scroll"},[e._t("waterfall-head"),n("div",{staticClass:"vue-waterfall-easy",style:e.isMobile?"":{width:e.colWidth*e.cols+"px",left:"50%",marginLeft:-1*e.colWidth*e.cols/2+"px"}},[e._l(e.imgsArr_c,function(t,i){return n("div",{staticClass:"img-box",class:[e.cardAnimationClass,{__err__:t._error}],style:{padding:(e.isMobile?e.mobileGap:e.gap)/2+"px",width:e.isMobile?"":e.colWidth+"px"}},[n(e.isRouterLink&&"card"==e.linkRange?"router-link":"alink",{tag:"component",staticClass:"img-inner-box",attrs:{"data-index":i,to:"card"==e.linkRange&&t[e.hrefKey]}},[t[e.srcKey]?n(e.isRouterLink&&"img"==e.linkRange?"router-link":"alink",{tag:"component",staticClass:"img-wraper",style:{width:e.imgWidth_c+"px",height:!!t._height&&t._height+"px"},attrs:{to:"img"==e.linkRange&&t[e.hrefKey]}},[n("img",{attrs:{src:t[e.srcKey]}})]):e._e(),e._t("default",null,{index:i,value:t})],2)],1)}),e.over?n("div",{ref:"over",staticClass:"over"},[e._t("waterfall-over",[e._v("被你看光了")])],2):e._e()],2)],2)])};i._withStripped=!0;var o={render:i,staticRenderFns:[]};t.a=o}]).default},zWga:function(e,t,n){"use strict";(function(n,i){var o,r=function(r,a){function s(e,t){function n(e){return!e.audio&&!e.video&&!e.screen&&e.data}var i="";i+="?userid="+e.userid,i+="&sessionid="+e.sessionid,i+="&msgEvent="+e.socketMessageEvent,i+="&socketCustomEvent="+e.socketCustomEvent,i+="&autoCloseEntireSession="+!!e.autoCloseEntireSession,!0===e.session.broadcast&&(i+="&oneToMany=true"),i+="&maxParticipantsAllowed="+e.maxParticipantsAllowed,e.enableScalableBroadcast&&(i+="&enableScalableBroadcast=true",i+="&maxRelayLimitPerUser="+(e.maxRelayLimitPerUser||2)),i+="&extra="+JSON.stringify(e.extra||{}),e.socketCustomParameters&&(i+=e.socketCustomParameters);try{io.sockets={}}catch(e){}if(e.socketURL||(e.socketURL="/"),"/"!=e.socketURL.substr(e.socketURL.length-1,1))throw'"socketURL" MUST end with a slash.';e.enableLogs&&("/"==e.socketURL?console.info("socket.io url is: ",location.origin+"/"):console.info("socket.io url is: ",e.socketURL));try{e.socket=io(e.socketURL+i)}catch(t){e.socket=io.connect(e.socketURL+i,e.socketOptions)}var o=e.multiPeersHandler;function r(t,n){e.peersBackup[t]||(e.peersBackup[t]={userid:t,extra:{}}),e.peersBackup[t].extra=n}e.socket.on("extra-data-updated",function(t,n){e.peers[t]&&(e.peers[t].extra=n,e.onExtraDataUpdated({userid:t,extra:n}),r(t,n))}),e.socket.on(e.socketMessageEvent,function t(i){if(i.remoteUserId==e.userid)if(e.peers[i.sender]&&e.peers[i.sender].extra!=i.message.extra&&(e.peers[i.sender].extra=i.extra,e.onExtraDataUpdated({userid:i.sender,extra:i.extra}),r(i.sender,i.extra)),i.message.streamSyncNeeded&&e.peers[i.sender]){var a=e.streamEvents[i.message.streamid];if(!a||!a.stream)return;var s=i.message.action;if("ended"===s||"inactive"===s||"stream-removed"===s)return e.peersBackup[a.userid]&&(a.extra=e.peersBackup[a.userid].extra),void e.onstreamended(a);var d="both"!=i.message.type?i.message.type:null;"function"==typeof a.stream[s]&&a.stream[s](d)}else if("dropPeerConnection"!==i.message){if(i.message.allParticipants)return-1===i.message.allParticipants.indexOf(i.sender)&&i.message.allParticipants.push(i.sender),void i.message.allParticipants.forEach(function(t){o[e.peers[t]?"renegotiatePeer":"createNewPeer"](t,{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:n(e.session)})});if(i.message.newParticipant){if(i.message.newParticipant==e.userid)return;if(e.peers[i.message.newParticipant])return;o.createNewPeer(i.message.newParticipant,i.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:n(e.session)})}else if(i.message.readyForOffer&&(e.attachStreams.length&&(e.waitingForLocalMedia=!1),e.waitingForLocalMedia))setTimeout(function(){t(i)},1);else if(i.message.newParticipationRequest&&i.sender!==e.userid){e.peers[i.sender]&&e.deletePeer(i.sender);var c={extra:i.extra||{},localPeerSdpConstraints:i.message.remotePeerSdpConstraints||{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:i.message.localPeerSdpConstraints||{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:void 0!==i.message.isOneWay?i.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:void 0!==i.message.isDataOnly?i.message.isDataOnly:n(e.session),dontGetRemoteStream:void 0!==i.message.isOneWay?i.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,dontAttachLocalStream:!!i.message.dontGetRemoteStream,connectionDescription:i,successCallback:function(){}};e.onNewParticipant(i.sender,c)}else{if(i.message.changedUUID&&e.peers[i.message.oldUUID]&&(e.peers[i.message.newUUID]=e.peers[i.message.oldUUID],delete e.peers[i.message.oldUUID]),i.message.userLeft)return o.onUserLeft(i.sender),void(i.message.autoCloseEntireSession&&e.leave());o.addNegotiatedMessage(i.message,i.sender)}}else e.deletePeer(i.sender)});var a=!1;e.socket.resetProps=function(){a=!1},e.socket.on("connect",function(){a||(a=!0,e.enableLogs&&console.info("socket.io connection is opened."),setTimeout(function(){e.socket.emit("extra-data-updated",e.extra)},1e3),t&&t(e.socket))}),e.socket.on("disconnect",function(t){e.onSocketDisconnect(t)}),e.socket.on("error",function(t){e.onSocketError(t)}),e.socket.on("user-disconnected",function(t){t!==e.userid&&(e.onUserStatusChanged({userid:t,status:"offline",extra:e.peers[t]&&e.peers[t].extra||{}}),e.deletePeer(t))}),e.socket.on("user-connected",function(t){t!==e.userid&&e.onUserStatusChanged({userid:t,status:"online",extra:e.peers[t]&&e.peers[t].extra||{}})}),e.socket.on("closed-entire-session",function(t,n){e.leave(),e.onEntireSessionClosed({sessionid:t,userid:t,extra:n})}),e.socket.on("userid-already-taken",function(t,n){e.onUserIdAlreadyTaken(t,n)}),e.socket.on("logs",function(t){e.enableLogs&&console.debug("server-logs",t)}),e.socket.on("number-of-broadcast-viewers-updated",function(t){e.onNumberOfBroadcastViewersUpdated(t)}),e.socket.on("set-isInitiator-true",function(t){t==e.sessionid&&(e.isInitiator=!0)})}function d(e){var t=this,n=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];function i(){e.fbr=new FileBufferReader,e.fbr.onProgress=function(t){e.onFileProgress(t)},e.fbr.onBegin=function(t){e.onFileStart(t)},e.fbr.onEnd=function(t){e.onFileEnd(t)}}e.peers={getLength:function(){var e=0;for(var t in this)-1==n.indexOf(t)&&e++;return e},selectFirst:function(){var e;for(var t in this)-1==n.indexOf(t)&&(e=this[t]);return e},getAllParticipants:function(e){var t=[];for(var i in this)-1==n.indexOf(i)&&i!=e&&t.push(i);return t},forEach:function(t){this.getAllParticipants().forEach(function(n){t(e.peers[n])})},send:function(n,i){var o=this;if(!g(n.size)&&!g(n.type)){if(e.enableFileSharing)return void t.shareFile(n,i);"string"!=typeof n&&(n=JSON.stringify(n))}if("text"===n.type||n instanceof ArrayBuffer||n instanceof DataView){if("text"===n.type&&(n=JSON.stringify(n)),i){var r=e.peers[i];if(r)return r.channels.length?void r.channels.forEach(function(e){e.send(n)}):(e.peers[i].createDataChannel(),e.renegotiate(i),void setTimeout(function(){o.send(n,i)},3e3))}this.getAllParticipants().forEach(function(t){if(!o[t].channels.length)return e.peers[t].createDataChannel(),e.renegotiate(t),void setTimeout(function(){o[t].channels.forEach(function(e){e.send(n)})},3e3);o[t].channels.forEach(function(e){e.send(n)})})}else _.send({text:n,channel:this,connection:e,remoteUserId:i})}},this.uuid=e.userid,this.getLocalConfig=function(n,o,r){return r||(r={}),{streamsToShare:r.streamsToShare||{},rtcMultiConnection:e,connectionDescription:r.connectionDescription,userid:o,localPeerSdpConstraints:r.localPeerSdpConstraints,remotePeerSdpConstraints:r.remotePeerSdpConstraints,dontGetRemoteStream:!!r.dontGetRemoteStream,dontAttachLocalStream:!!r.dontAttachLocalStream,renegotiatingPeer:!!r.renegotiatingPeer,peerRef:r.peerRef,channels:r.channels||[],onLocalSdp:function(e){t.onNegotiationNeeded(e,o)},onLocalCandidate:function(n){(n=O.processCandidates(e,n))&&t.onNegotiationNeeded(n,o)},remoteSdp:n,onDataChannelMessage:function(n){if(!e.fbr&&e.enableFileSharing&&i(),"string"!=typeof n&&e.enableFileSharing){var r=this;n instanceof ArrayBuffer||n instanceof DataView?e.fbr.convertToObject(n,function(e){r.onDataChannelMessage(e)}):n.readyForNextChunk?e.fbr.getNextChunk(n,function(t,n){e.peers[o].channels.forEach(function(e){e.send(t)})},o):n.chunkMissing?e.fbr.chunkMissing(n):e.fbr.addChunk(n,function(t){e.peers[o].peer.channel.send(t)})}else t.onDataChannelMessage(n,o)},onDataChannelError:function(e){t.onDataChannelError(e,o)},onDataChannelOpened:function(e){t.onDataChannelOpened(e,o)},onDataChannelClosed:function(e){t.onDataChannelClosed(e,o)},onRemoteStream:function(n){e.peers[o]&&e.peers[o].streams.push(n),t.onGettingRemoteMedia(n,o)},onRemoteStreamRemoved:function(e){t.onRemovingRemoteMedia(e,o)},onPeerStateChanged:function(e){t.onPeerStateChanged(e),"new"===e.iceConnectionState&&t.onNegotiationStarted(o,e),"connected"===e.iceConnectionState&&t.onNegotiationCompleted(o,e),-1!==e.iceConnectionState.search(/closed|failed/gi)&&(t.onUserLeft(o),t.disconnectWith(o))}}},this.createNewPeer=function(t,n){if(!(e.maxParticipantsAllowed<=e.getAllParticipants().length)){if(n=n||{},e.isInitiator&&e.session.audio&&"two-way"===e.session.audio&&!n.streamsToShare&&(n.isOneWay=!1,n.isDataOnly=!1,n.session=e.session),!n.isOneWay&&!n.isDataOnly)return n.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:n},t);n=e.setUserPreferences(n,t);var i=this.getLocalConfig(null,t,n);e.peers[t]=new M(i)}},this.createAnsweringPeer=function(t,n,i){i=e.setUserPreferences(i||{},n);var o=this.getLocalConfig(t,n,i);e.peers[n]=new M(o)},this.renegotiatePeer=function(t,n,i){if(e.peers[t]){n||(n={}),n.renegotiatingPeer=!0,n.peerRef=e.peers[t].peer,n.channels=e.peers[t].channels;var o=this.getLocalConfig(i,t,n);e.peers[t]=new M(o)}else e.enableLogs&&console.error("Peer ("+t+") does not exist. Renegotiation skipped.")},this.replaceTrack=function(t,n,i){if(!e.peers[n])throw"This peer ("+n+") does not exist.";var o=e.peers[n].peer;o.getSenders&&"function"==typeof o.getSenders&&o.getSenders().length?o.getSenders().forEach(function(o){i&&"video"===o.track.kind&&(e.peers[n].peer.lastVideoTrack=o.track,o.replaceTrack(t)),i||"audio"!==o.track.kind||(e.peers[n].peer.lastAudioTrack=o.track,o.replaceTrack(t))}):(console.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(n))},this.onNegotiationNeeded=function(e,t){},this.addNegotiatedMessage=function(n,i){if(n.type&&n.sdp)return"answer"==n.type&&e.peers[i]&&e.peers[i].addRemoteSdp(n),"offer"==n.type&&(n.renegotiatingPeer?this.renegotiatePeer(i,null,n):this.createAnsweringPeer(n,i)),void(e.enableLogs&&console.log("Remote peer's sdp:",n.sdp));if(n.candidate)return e.peers[i]&&e.peers[i].addRemoteCandidate(n),void(e.enableLogs&&console.log("Remote peer's candidate pairs:",n.candidate));if(n.enableMedia){e.session=n.userPreferences.session||e.session,e.session.oneway&&e.attachStreams.length&&(e.attachStreams=[]),n.userPreferences.isDataOnly&&e.attachStreams.length&&(e.attachStreams.length=[]);var o={};e.attachStreams.forEach(function(e){o[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),n.userPreferences.streamsToShare=o,t.onNegotiationNeeded({readyForOffer:!0,userPreferences:n.userPreferences},i)}n.readyForOffer&&e.onReadyForOffer(i,n.userPreferences)},this.onGettingRemoteMedia=function(e,t){},this.onRemovingRemoteMedia=function(e,t){},this.onGettingLocalMedia=function(e){},this.onLocalMediaError=function(t,n){e.onMediaError(t,n)},this.shareFile=function(t,n){i(),e.fbr.readAsArrayBuffer(t,function(t){var i=e.getAllParticipants();n&&(i=[n]),i.forEach(function(n){e.fbr.getNextChunk(t,function(t){e.peers[n].channels.forEach(function(e){e.send(t)})},n)})},{userid:e.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15e3:e.chunkSize||0})};var o=new function(e){var t={};return{receive:function(n,i,o){var r=n.uuid;t[r]||(t[r]=[]);if(t[r].push(n.message),n.last){var a=t[r].join("");n.isobject&&(a=JSON.parse(a));var s=(new Date).getTime(),d=s-n.sendingTime,c={data:a,userid:i,extra:o,latency:d};e.autoTranslateText?(c.original=c.data,e.Translator.TranslateText(c.data,function(t){c.data=t,e.onmessage(c)})):e.onmessage(c),delete t[r]}}}}(e);this.onDataChannelMessage=function(t,n){o.receive(JSON.parse(t),n,e.peers[n]?e.peers[n].extra:{})},this.onDataChannelClosed=function(t,n){t.userid=n,t.extra=e.peers[n]?e.peers[n].extra:{},e.onclose(t)},this.onDataChannelError=function(t,n){t.userid=n,event.extra=e.peers[n]?e.peers[n].extra:{},e.onerror(t)},this.onDataChannelOpened=function(t,n){e.peers[n].channels.length?e.peers[n].channels=[t]:(e.peers[n].channels.push(t),e.onopen({userid:n,extra:e.peers[n]?e.peers[n].extra:{},channel:t}))},this.onPeerStateChanged=function(t){e.onPeerStateChanged(t)},this.onNegotiationStarted=function(e,t){},this.onNegotiationCompleted=function(e,t){},this.getRemoteStreams=function(t){return t=t||e.peers.getAllParticipants()[0],e.peers[t]?e.peers[t].streams:[]}}function c(e,t,n){if("undefined"!=typeof CustomEvent){var i=new CustomEvent(t,{arguments:n,__exposedProps__:n});e.dispatchEvent(i)}}function u(e,t){t.stream&&t.stream&&t.stream.addEventListener&&(t.stream.addEventListener("mute",function(n){(n=e.streamEvents[t.streamid]).session={audio:"audio"===n.muteType,video:"video"===n.muteType},e.onmute(n)},!1),t.stream.addEventListener("unmute",function(n){(n=e.streamEvents[t.streamid]).session={audio:"audio"===n.unmuteType,video:"video"===n.unmuteType},e.onunmute(n)},!1))}function l(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),t="",n=0,i=e.length;n<i;n++)t+=e[n].toString(36);return t}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}function f(e,t,n){if(n.autoCreateMediaElement){var i=!1;S(e,"video").length||e.isVideo||e.isScreen||(i=!0),"Firefox"===DetectRTC.browser.name&&(n.session.video||n.session.screen)&&(i=!1);var o=document.createElement(i?"audio":"video");o.srcObject=e;try{o.setAttributeNode(document.createAttribute("autoplay")),o.setAttributeNode(document.createAttribute("playsinline")),o.setAttributeNode(document.createAttribute("controls"))}catch(e){o.setAttribute("autoplay",!0),o.setAttribute("playsinline",!0),o.setAttribute("controls",!0)}if("Firefox"===DetectRTC.browser.name){var r="ended";"oninactive"in o&&(r="inactive"),o.addEventListener(r,function(){if(currentUserMediaRequest.remove(e.idInstance),"local"===e.type){r="ended","oninactive"in e&&(r="inactive"),N.onSyncNeeded(e.streamid,r),n.attachStreams.forEach(function(t,i){e.streamid===t.streamid&&delete n.attachStreams[i]});var t=[];n.attachStreams.forEach(function(e){e&&t.push(e)}),n.attachStreams=t;var i=n.streamEvents[e.streamid];if(i)return void n.onstreamended(i);this.parentNode&&this.parentNode.removeChild(this)}},!1)}var a=o.play();if(void 0!==a){var s=!1;setTimeout(function(){s||(s=!0,t(o))},1e3),a.then(function(){s||(s=!0,t(o))}).catch(function(e){s||(s=!0,t(o))})}else t(o)}else t({})}function m(e,t){window.removeEventListener(e,t),window.addEventListener(e,t,!1)}function p(e){var t=[];return e.forEach(function(e){e&&t.push(e)}),t}function v(e){return!e.audio&&!e.video&&!e.screen&&e.data}function g(e){return void 0===e}!function(e){e&&"undefined"==typeof window&&void 0!==n&&(n.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},n.console||(n.console={}),void 0===n.console.debug&&(n.console.debug=n.console.info=n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},document.addEventListener=document.removeEventListener=e.addEventListener=e.removeEventListener=function(){},e.HTMLVideoElement=e.HTMLMediaElement=function(){}),"undefined"==typeof io&&(e.io=function(){return{on:function(e,t){t=t||function(){},"connect"===e&&t()},emit:function(e,t,n){n=n||function(){},"open-room"!==e&&"join-room"!==e||n(!0,t.sessionid,null)}}}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:"",origin:"self"}),"undefined"==typeof screen&&(e.screen={width:0,height:0}),"undefined"==typeof URL&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=n)}(void 0!==n?n:null),function(){var r="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(S="object"==typeof i&&"object"==typeof i.versions&&i.versions.node&&!i.browser){var a=i.versions.node.toString().replace("v","");r="Nodejs/"+a+" (NodeOS) AppleWebKit/"+a+" (KHTML, like Gecko) Nodejs/"+a+" Nodejs/"+a}!function(e){"undefined"==typeof window&&("undefined"==typeof window&&void 0!==n&&(n.navigator={userAgent:r,getUserMedia:function(){}},e.window=n),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}))}(void 0!==n?n:window);var s=window.navigator;void 0!==s?(void 0!==s.webkitGetUserMedia&&(s.getUserMedia=s.webkitGetUserMedia),void 0!==s.mozGetUserMedia&&(s.getUserMedia=s.mozGetUserMedia)):s={getUserMedia:function(){},userAgent:r};var d=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(s.userAgent||""),c=!(-1===s.userAgent.indexOf("Edge")||!s.msSaveOrOpenBlob&&!s.msSaveBlob),u=!!window.opera||s.userAgent.indexOf(" OPR/")>=0,l=void 0!==window.InstallTrigger,f=/^((?!chrome|android).)*safari/i.test(s.userAgent),m=!!window.chrome&&!u,p="undefined"!=typeof document&&!!document.documentMode&&!c;function v(e,t){var n=0,i=!1,o=window.setInterval(function(){e()&&(window.clearInterval(o),t(i)),n++>50&&(window.clearInterval(o),t(i=!0))},10)}var g={Android:function(){return s.userAgent.match(/Android/i)},BlackBerry:function(){return s.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return s.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return s.userAgent.match(/Opera Mini/i)},Windows:function(){return s.userAgent.match(/IEMobile/i)},any:function(){return g.Android()||g.BlackBerry()||g.iOS()||g.Opera()||g.Windows()},getOsName:function(){var e="Unknown OS";return g.Android()&&(e="Android"),g.BlackBerry()&&(e="BlackBerry"),g.iOS()&&(e="iOS"),g.Opera()&&(e="Opera Mini"),g.Windows()&&(e="Windows"),e}};var h="Unknown OS",w="Unknown OS Version";var b=function(){for(var e,t=s.appVersion,n=s.userAgent,i="-",o=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],r=0;e=o[r];r++)if(e.r.test(n)){i=e.s;break}var a="-";switch(/Windows/.test(i)&&(/Windows (.*)/.test(i)&&(a=/Windows (.*)/.exec(i)[1]),i="Windows"),i){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(n)&&(a=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(n)&&(a=/Android ([\.\_\d]+)/.exec(n)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(a=(a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+a[2]+"."+(0|a[3]))}return{osName:i,osVersion:a}}();b&&b.osName&&"-"!=b.osName?(h=b.osName,w=b.osVersion):g.any()&&"Android"==(h=g.getOsName())&&(w=function(e){var t=(e=(e||s.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/);return!!t&&t[1]}());var S="object"==typeof i&&"object"==typeof i.versions&&i.versions.node;"Unknown OS"===h&&S&&(h="Nodejs",w=i.versions.node.toString().replace("v",""));var y=!1,C=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!y&&e in document.createElement("canvas")&&(y=!0),!C&&e in document.createElement("video")&&(C=!0))});var A=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,k=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,R=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;var x=[],T=[],M=[],P=[];s.mediaDevices&&s.mediaDevices.enumerateDevices&&(s.enumerateDevices=function(e){var t=s.mediaDevices.enumerateDevices();t&&t.then?s.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var O=!1;void 0!==E&&"getSources"in E?O=!0:s.mediaDevices&&s.mediaDevices.enumerateDevices&&(O=!0);var D=!1,L=!1,N=!1,I=!1,U=!1;function B(e){if(O)if(!s.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(s.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!s.enumerateDevices&&s.enumerateDevices&&(s.enumerateDevices=s.enumerateDevices.bind(s)),s.enumerateDevices){x=[],T=[],M=[],P=[],D=!1,L=!1,N=!1,I=!1,U=!1;var t={};s.enumerateDevices(function(n){n.forEach(function(e){var n={};for(var i in e)try{"function"!=typeof e[i]&&(n[i]=e[i])}catch(e){}t[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label?("videoinput"!==n.kind||U||(U=!0),"audioinput"!==n.kind||I||(I=!0)):(n.isCustomLabel=!0,"videoinput"===n.kind?n.label="Camera "+(P.length+1):"audioinput"===n.kind?n.label="Microphone "+(T.length+1):"audiooutput"===n.kind?n.label="Speaker "+(M.length+1):n.label="Please invoke getUserMedia once.",void 0!==W&&W.browser.isChrome&&W.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(D=!0,-1===T.indexOf(n)&&T.push(n)),"audiooutput"===n.kind&&(L=!0,-1===M.indexOf(n)&&M.push(n)),"videoinput"===n.kind&&(N=!0,-1===P.indexOf(n)&&P.push(n)),x.push(n),t[n.deviceId+n.label+n.kind]=n)}),void 0!==W&&(W.MediaDevices=x,W.hasMicrophone=D,W.hasSpeakers=L,W.hasWebcam=N,W.isWebsiteHasWebcamPermissions=U,W.isWebsiteHasMicrophonePermissions=I,W.audioInputDevices=T,W.audioOutputDevices=M,W.videoInputDevices=P),e&&e()})}else e&&e();else e&&e()}var W=window.DetectRTC||{};W.browser=function(){s.appVersion;var e,t,n,i=s.userAgent,o=s.appName,r=""+parseFloat(s.appVersion),a=parseInt(s.appVersion,10);if(f&&!m&&-1!==i.indexOf("CriOS")&&(f=!1,m=!0),u){o="Opera";try{a=(r=s.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){r="0.0.0.0",a=0}}else p?((t=i.indexOf("rv:"))>0?r=i.substring(t+3):(t=i.indexOf("MSIE"),r=i.substring(t+5)),o="IE"):m?(t=i.indexOf("Chrome"),o="Chrome",r=i.substring(t+7)):f?(t=i.indexOf("Safari"),o="Safari",r=i.substring(t+7),-1!==(t=i.indexOf("Version"))&&(r=i.substring(t+8)),-1!==s.userAgent.indexOf("Version/")&&(r=s.userAgent.split("Version/")[1].split(" ")[0])):l?(t=i.indexOf("Firefox"),o="Firefox",r=i.substring(t+8)):(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(o=i.substring(e,t),r=i.substring(t+1),o.toLowerCase()===o.toUpperCase()&&(o=s.appName));return c&&(o="Edge",r=s.userAgent.split("Edge/")[1]),-1!==(n=r.search(/[; \)]/))&&(r=r.substring(0,n)),a=parseInt(""+r,10),isNaN(a)&&(r=""+parseFloat(s.appVersion),a=parseInt(s.appVersion,10)),{fullVersion:r,version:a,name:o,isPrivateBrowsing:!1}}(),function(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){t=!1},function(e){t=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{(n=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){t=!0}void 0===t&&v(function(){return"done"===n.readyState},function(e){e||(t=!n.result)})}else if(function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(n&&parseInt(n[1],10)>=10)}(window.navigator.userAgent)){t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){t=!0}void 0===t&&(t=!1,window.localStorage.removeItem("test"))}}catch(e){t=!1}v(function(){return void 0!==t},function(n){e(t)})}(function(e){W.browser.isPrivateBrowsing=!!e}),W.browser["is"+W.browser.name]=!0,W.osName=h,W.osVersion=w;"object"==typeof i&&"object"==typeof i.versions&&i.versions["node-webkit"];var V=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){V||e in window&&(V=!0)}),W.isWebRTCSupported=V,W.isORTCSupported="undefined"!=typeof RTCIceGatherer;var F=!1;(W.browser.isChrome&&W.browser.version>=35?F=!0:W.browser.isFirefox&&W.browser.version>=34?F=!0:W.browser.isEdge&&W.browser.version>=17?F=!0:"Android"===W.osName&&W.browser.isChrome&&(F=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(W.browser.isChrome||W.browser.isEdge||W.browser.isOpera)?F=!1:W.browser.isFirefox&&(F=!1));W.isScreenCapturingSupported=F;var G={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){G.isSupported||e in window&&(G.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(G.isCreateMediaStreamSourceSupported=!0))}),W.isAudioContextSupported=G.isSupported,W.isCreateMediaStreamSourceSupported=G.isCreateMediaStreamSourceSupported;var q=!1;W.browser.isChrome&&W.browser.version>31&&(q=!0),W.isRtpDataChannelsSupported=q;var _=!1;W.browser.isFirefox&&W.browser.version>28?_=!0:W.browser.isChrome&&W.browser.version>25?_=!0:W.browser.isOpera&&W.browser.version>=11&&(_=!0),W.isSctpDataChannelsSupported=_,W.isMobileDevice=d;var j=!1;s.getUserMedia?j=!0:s.mediaDevices&&s.mediaDevices.getUserMedia&&(j=!0),W.browser.isChrome&&W.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(j="Requires HTTPs"),"Nodejs"===W.osName&&(j=!1),W.isGetUserMediaSupported=j;var H="";screen.width&&(H+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));W.displayResolution=H,W.displayAspectRatio=function(e,t){var n=function e(t,n){return 0==n?t:e(n,t%n)}(e,t);return e/n/(t/n)}(screen.width,screen.height).toFixed(2),W.isCanvasSupportsStreamCapturing=y,W.isVideoSupportsStreamCapturing=C,"Chrome"==W.browser.name&&W.browser.version>=53&&(W.isCanvasSupportsStreamCapturing||(W.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),W.isVideoSupportsStreamCapturing||(W.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),W.DetectLocalIPAddress=function(e,t){if(W.isWebRTCSupported){var n=!0,i=!0;!function(e,t){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var n={},i=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!i){var o=document.getElementById("iframe");if(!o)return;var r=o.contentWindow;i=r.RTCPeerConnection||r.mozRTCPeerConnection||r.webkitRTCPeerConnection}if(i){var a=null;"Chrome"===W.browser&&W.browser.version<58&&(a={optional:[{RtpDataChannels:!0}]});var s=new i({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},a);if(t&&(s.addStream?s.addStream(t):s.addTrack&&t.getTracks()[0]&&s.addTrack(t.getTracks()[0],t)),s.onicecandidate=function(e){e.candidate&&e.candidate.candidate?d(e.candidate.candidate):d()},!t)try{s.createDataChannel("sctp",{})}catch(e){}W.isPromisesSupported?s.createOffer().then(function(e){s.setLocalDescription(e).then(c)}):s.createOffer(function(e){s.setLocalDescription(e,c,function(){})},function(){})}}function d(t){if(t){var i=k.exec(t);if(i){var o=i[1],r=t.match(A);void 0===n[o]&&e(o,r,!0),n[o]=!0}}else e()}function c(){var e=s.localDescription.sdp.split("\n");e.forEach(function(e){e&&0===e.indexOf("a=candidate:")&&d(e)})}}(function(t){t?t.match(A)?e("Local: "+t,n=!1,i):t.match(R)?e("Public: "+t,n,i=!1):e("Public: "+t,n,i):e()},t)}},W.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,W.isWebSocketsBlocked=!W.isWebSocketsSupported,"Nodejs"===W.osName&&(W.isWebSocketsSupported=!0,W.isWebSocketsBlocked=!1),W.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,n=new WebSocket("wss://echo.websocket.org:443/");n.onopen=function(){W.isWebSocketsBlocked=!1,t=(new Date).getTime(),n.send("ping")},n.onmessage=function(){W.WebsocketLatency=(new Date).getTime()-t+"ms",e(),n.close(),n=null},n.onerror=function(){W.isWebSocketsBlocked=!0,e()}}catch(t){W.isWebSocketsBlocked=!0,e()}},W.load=function(e){B(e=e||function(){})},W.MediaDevices=void 0!==x?x:[],W.hasMicrophone=D,W.hasSpeakers=L,W.hasWebcam=N,W.isWebsiteHasWebcamPermissions=U,W.isWebsiteHasMicrophonePermissions=I,W.audioInputDevices=T,W.audioOutputDevices=M,W.videoInputDevices=P;var z=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(z=!0),W.isSetSinkIdSupported=z;var J=!1;W.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(J=!0):W.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(J=!0),W.isRTPSenderReplaceTracksSupported=J;var Q=!1;W.browser.isFirefox&&W.browser.version>38&&(Q=!0),W.isRemoteStreamProcessingSupported=Q;var Y=!1;void 0!==E&&"applyConstraints"in E.prototype&&(Y=!0),W.isApplyConstraintsSupported=Y;var X=!1;W.browser.isFirefox&&W.browser.version>=43&&(X=!0),W.isMultiMonitorScreenCapturingSupported=X,W.isPromisesSupported=!!("Promise"in window),W.version="1.3.9",void 0===W&&(window.DetectRTC={});var Z=window.MediaStream;void 0===Z&&"undefined"!=typeof webkitMediaStream&&(Z=webkitMediaStream),W.MediaStream=void 0!==Z&&"function"==typeof Z&&Object.keys(Z.prototype),W.MediaStreamTrack=void 0!==E&&Object.keys(E.prototype);var K=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;W.RTCPeerConnection=void 0!==K&&Object.keys(K.prototype),window.DetectRTC=W,e.exports=W,void 0===(o=function(){return W}.apply(t,[]))||(e.exports=o)}(),"undefined"!=typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(e,t,n){e.attachEvent&&e.attachEvent("on"+t,n)}),window.attachEventListener=function(e,t,n,i){e.addEventListener(t,n,i)};var h=window.MediaStream;function w(e,t){return(!e.session.audio||"two-way"!==e.session.audio)&&("Firefox"===DetectRTC.browser.name&&!1!==t||!("Chrome"!==DetectRTC.browser.name||DetectRTC.browser.version<50)&&(!0===typeof t||!(void 0!==t||!e.session.audio||!e.session.screen||e.session.video)&&(t=!0,!0)))}function b(e){return"Firefox"===DetectRTC.browser.name||"Chrome"===DetectRTC.browser.name&&{mandatory:{chromeMediaSource:e.mandatory.chromeMediaSource,chromeMediaSourceId:e.mandatory.chromeMediaSourceId}}}function S(e,t){return e&&e.getTracks?e.getTracks().filter(function(e){return e.kind===(t||"audio")}):[]}function y(){var e=!1;try{if("undefined"==typeof RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t=new A;try{t.addTransceiver("audio"),e=!0}catch(e){}t.close()}catch(t){e=!1}return e&&function(){var e=!1;try{var t=new A({sdpSemantics:"unified-plan"});try{var n=t.getConfiguration();e="unified-plan"==n.sdpSemantics||(n.sdpSemantics,!1)}catch(t){e=!1}}catch(t){e=!1}return e}()}function C(){if("undefined"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.iosrtc){var e=cordova.plugins.iosrtc;window.webkitRTCPeerConnection=e.RTCPeerConnection,window.RTCSessionDescription=e.RTCSessionDescription,window.RTCIceCandidate=e.RTCIceCandidate,window.MediaStream=e.MediaStream,window.MediaStreamTrack=e.MediaStreamTrack,navigator.getUserMedia=navigator.webkitGetUserMedia=e.getUserMedia,e.debug.enable("iosrtc*"),"function"==typeof e.selectAudioOutput&&e.selectAudioOutput(window.iOSDefaultAudioOutputDevice||"speaker"),e.registerGlobals()}}void 0===h&&"undefined"!=typeof webkitMediaStream&&(h=webkitMediaStream),void 0!==h&&("stop"in h.prototype||(h.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})})),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker",document.addEventListener("deviceready",C,!1),C();var A,k={};function R(e){return{OfferToReceiveAudio:!!e.OfferToReceiveAudio,OfferToReceiveVideo:!!e.OfferToReceiveVideo}}void 0!==window.RTCPeerConnection?A=window.RTCPeerConnection:"undefined"!=typeof mozRTCPeerConnection?A=mozRTCPeerConnection:"undefined"!=typeof webkitRTCPeerConnection&&(A=webkitRTCPeerConnection);var x=window.RTCSessionDescription||window.mozRTCSessionDescription,T=window.RTCIceCandidate||window.mozRTCIceCandidate,E=window.MediaStreamTrack;function M(e){if(void 0!==window.RTCPeerConnection?A=window.RTCPeerConnection:"undefined"!=typeof mozRTCPeerConnection?A=mozRTCPeerConnection:"undefined"!=typeof webkitRTCPeerConnection&&(A=webkitRTCPeerConnection),x=window.RTCSessionDescription||window.mozRTCSessionDescription,T=window.RTCIceCandidate||window.mozRTCIceCandidate,E=window.MediaStreamTrack,!A)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";var t=e.rtcMultiConnection;this.extra=e.remoteSdp?e.remoteSdp.extra:t.extra,this.userid=e.userid,this.streams=[],this.channels=e.channels||[],this.connectionDescription=e.connectionDescription,this.addStream=function(e){t.addStream(e,n.userid)},this.removeStream=function(e){t.removeStream(e,n.userid)};var n=this;e.remoteSdp&&(this.connectionDescription=e.remoteSdp.connectionDescription);var i,o={};k.sdpConstraints=R({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0});var r=!!e.renegotiatingPeer;e.remoteSdp&&(r=!!e.remoteSdp.renegotiatingPeer);var a=[];if(t.attachStreams.forEach(function(e){e&&a.push(e)}),r)i=e.peerRef;else{var s="all";(t.candidates.turn||t.candidates.relay)&&(t.candidates.stun||t.candidates.reflexive||t.candidates.host||(s="relay"));try{var d={iceServers:t.iceServers,iceTransportPolicy:t.iceTransportPolicy||s};void 0!==t.iceCandidatePoolSize&&(d.iceCandidatePoolSize=t.iceCandidatePoolSize),void 0!==t.bundlePolicy&&(d.bundlePolicy=t.bundlePolicy),void 0!==t.rtcpMuxPolicy&&(d.rtcpMuxPolicy=t.rtcpMuxPolicy),"Chrome"===DetectRTC.browser.name&&(d.sdpSemantics=t.sdpSemantics||"unified-plan"),t.iceServers&&t.iceServers.length||(d=null,t.optionalArgument=null),i=new A(d,t.optionalArgument)}catch(e){try{d={iceServers:t.iceServers};i=new A(d)}catch(e){i=new A}}}!i.getRemoteStreams&&i.getReceivers&&(i.getRemoteStreams=function(){var e=new h;return i.getReceivers().forEach(function(t){e.addTrack(t.track)}),[e]}),!i.getLocalStreams&&i.getSenders&&(i.getLocalStreams=function(){var e=new h;return i.getSenders().forEach(function(t){e.addTrack(t.track)}),[e]}),i.onicecandidate=function(o){if(o.candidate)t.trickleIce&&e.onLocalCandidate({candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex});else if(!t.trickleIce){var r=i.localDescription;e.onLocalSdp({type:r.type,sdp:r.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:n.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:t?t.extra:{},streamsToShare:m})}},a.forEach(function(o){e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream||e.dontAttachLocalStream||(o=t.beforeAddingStream(o,n))&&(i.getLocalStreams().forEach(function(e){o&&e.id==o.id&&(o=null)}),o&&o.getTracks&&o.getTracks().forEach(function(e){try{i.addTrack(e,o)}catch(e){}}))}),i.oniceconnectionstatechange=i.onsignalingstatechange=function(){var o=n.extra;t.peers[n.userid]&&(o=t.peers[n.userid].extra||o),i&&(e.onPeerStateChanged({iceConnectionState:i.iceConnectionState,iceGatheringState:i.iceGatheringState,signalingState:i.signalingState,extra:o,userid:n.userid}),i&&i.iceConnectionState&&-1!==i.iceConnectionState.search(/closed|failed/gi)&&n.streams instanceof Array&&n.streams.forEach(function(e){var n=t.streamEvents[e.id]||{streamid:e.id,stream:e,type:"remote"};t.onstreamended(n)}))};var c={OfferToReceiveAudio:!!a.length,OfferToReceiveVideo:!!a.length};e.localPeerSdpConstraints&&(c=e.localPeerSdpConstraints),k.sdpConstraints=R(c);var u={};i.ontrack=function(t){if(t&&"track"===t.type)if(t.stream=t.streams[t.streams.length-1],t.stream.id||(t.stream.id=t.track.id),u[t.stream.id]&&"Safari"!==DetectRTC.browser.name)t.track&&(t.track.onended=function(){i&&i.onremovestream(t)});else{u[t.stream.id]=t.stream.id;var n={};e.remoteSdp&&e.remoteSdp.streamsToShare?n=e.remoteSdp.streamsToShare:e.streamsToShare&&(n=e.streamsToShare);var r=n[t.stream.id];r?(t.stream.isAudio=r.isAudio,t.stream.isVideo=r.isVideo,t.stream.isScreen=r.isScreen):(t.stream.isVideo=!!S(t.stream,"video").length,t.stream.isAudio=!t.stream.isVideo,t.stream.isScreen=!1),t.stream.streamid=t.stream.id,o[t.stream.id]=t.stream,e.onRemoteStream(t.stream),t.stream.getTracks().forEach(function(e){e.onended=function(){i&&i.onremovestream(t)}}),t.stream.onremovetrack=function(){i&&i.onremovestream(t)}}},i.onremovestream=function(t){t.stream.streamid=t.stream.id,o[t.stream.id]&&delete o[t.stream.id],e.onRemoteStreamRemoved(t.stream)},"function"!=typeof i.removeStream&&(i.removeStream=function(e){e.getTracks().forEach(function(t){i.removeTrack(t,e)})}),this.addRemoteCandidate=function(e){i.addIceCandidate(new T(e))},this.addRemoteSdp=function(e,n){n=n||function(){},"Safari"!==DetectRTC.browser.name&&(e.sdp=t.processSdp(e.sdp)),i.setRemoteDescription(new x(e)).then(n,function(i){t.enableLogs&&console.error("setRemoteDescription failed","\n",i,"\n",e.sdp),n()}).catch(function(i){t.enableLogs&&console.error("setRemoteDescription failed","\n",i,"\n",e.sdp),n()})};var l=!0;function f(t){t.binaryType="arraybuffer",t.onmessage=function(t){e.onDataChannelMessage(t.data)},t.onopen=function(){e.onDataChannelOpened(t)},t.onerror=function(t){e.onDataChannelError(t)},t.onclose=function(t){e.onDataChannelClosed(t)},t.internalSend=t.send,t.send=function(e){"open"===t.readyState&&t.internalSend(e)},i.channel=t}e.remoteSdp&&(l=!1),this.createDataChannel=function(){f(i.createDataChannel("sctp",{}))},!0!==t.session.data||r||(l?this.createDataChannel():i.ondatachannel=function(e){f(e.channel)}),this.enableDisableVideoEncoding=function(e){var t;if(i.getSenders().forEach(function(e){t||"video"!==e.track.kind||(t=e)}),t&&t.getParameters){var n=t.getParameters();n.encodings[1]&&(n.encodings[1].active=!!e),n.encodings[2]&&(n.encodings[2].active=!!e),t.setParameters(n)}},e.remoteSdp&&(e.remoteSdp.remotePeerSdpConstraints&&(c=e.remoteSdp.remotePeerSdpConstraints),k.sdpConstraints=R(c),this.addRemoteSdp(e.remoteSdp,function(){p("createAnswer")})),"two-way"!=t.session.audio&&"two-way"!=t.session.video&&"two-way"!=t.session.screen||(k.sdpConstraints=R({OfferToReceiveAudio:"two-way"==t.session.audio||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==t.session.video||"two-way"==t.session.screen||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio}));var m={};function p(o){i[o](k.sdpConstraints).then(function(o){"Safari"!==DetectRTC.browser.name&&(o.sdp=t.processSdp(o.sdp)),i.setLocalDescription(o).then(function(){t.trickleIce&&(e.onLocalSdp({type:o.type,sdp:o.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:n.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:t?t.extra:{},streamsToShare:m}),t.onSettingLocalDescription(n))},function(e){t.enableLogs&&console.error("setLocalDescription error",e)})},function(e){t.enableLogs&&console.error("sdp-error",e)})}i.getLocalStreams().forEach(function(e){m[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),l&&p("createOffer"),i.nativeClose=i.close,i.close=function(){if(i){try{i.nativeClose!==i.close&&i.nativeClose()}catch(e){}i=null,n.peer=null}},this.peer=i}var P=function(){function e(e,i){var o=n(e);return o.videoCodecNumbers?"vp8"===i&&o.vp8LineNumber===o.videoCodecNumbers[0]?e:"vp9"===i&&o.vp9LineNumber===o.videoCodecNumbers[0]?e:"h264"===i&&o.h264LineNumber===o.videoCodecNumbers[0]?e:e=t(e,i,o):e}function t(e,t,n,i){var o="";if("vp8"===t){if(!n.vp8LineNumber)return e;o=n.vp8LineNumber}if("vp9"===t){if(!n.vp9LineNumber)return e;o=n.vp9LineNumber}if("h264"===t){if(!n.h264LineNumber)return e;o=n.h264LineNumber}var r=n.videoCodecNumbersOriginal.split("SAVPF")[0]+"SAVPF ",a=[o];return i&&(a=[]),n.videoCodecNumbers.forEach(function(e){e!==o&&a.push(e)}),r+=a.join(" "),e=e.replace(n.videoCodecNumbersOriginal,r)}function n(e){var t={};return e.split("\n").forEach(function(e){0===e.indexOf("m=video")&&(t.videoCodecNumbers=[],e.split("SAVPF")[1].split(" ").forEach(function(n){(n=n.trim())&&n.length&&(t.videoCodecNumbers.push(n),t.videoCodecNumbersOriginal=e)})),-1===e.indexOf("VP8/90000")||t.vp8LineNumber||(t.vp8LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("VP9/90000")||t.vp9LineNumber||(t.vp9LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("H264/90000")||t.h264LineNumber||(t.h264LineNumber=e.replace("a=rtpmap:","").split(" ")[0])}),t}function i(e,t,n){return function(e,t,n,i,o){for(var r=-1!==n?n:e.length,a=t;a<r;++a)if(0===e[a].indexOf(i)&&(!o||-1!==e[a].toLowerCase().indexOf(o.toLowerCase())))return a;return null}(e,0,-1,t,n)}function o(e){var t=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),n=e.match(t);return n&&2===n.length?n[1]:null}return{removeVPX:function(e){var i=n(e);return e=t(e=t(e,"vp9",i,!0),"vp8",i,!0)},disableNACK:function(e){if(!e||"string"!=typeof e)throw"Invalid arguments.";return e=(e=(e=(e=e.replace("a=rtcp-fb:126 nack\r\n","")).replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n")).replace("a=rtcp-fb:97 nack\r\n","")).replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n")},prioritize:function(e,t){if(t&&t.getSenders&&t.getSenders().length){if(!e||"string"!=typeof e)throw"Invalid arguments.";t.getSenders().forEach(function(t){for(var n=t.getParameters(),i=0;i<n.codecs.length;i++)if(n.codecs[i].mimeType==e){n.codecs.unshift(n.codecs.splice(i,1));break}t.setParameters(n)})}},removeNonG722:function(e){return e.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")},setApplicationSpecificBandwidth:function(e,t,n){return function(e,t,n){return t?void 0!==V&&V?e:(n&&(t.screen?t.screen<300&&console.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):console.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),t.screen&&n&&(e=(e=e.replace(/b=AS([^\r\n]+\r\n)/g,"")).replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n")),(t.audio||t.video)&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,"")),t.audio&&(e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+t.audio+"\r\n")),t.screen?e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n"):t.video&&(e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.video+"\r\n")),e):e}(e,t,n)},setVideoBitrates:function(e,t){return function(e,t){var n,r=(t=t||{}).min,a=t.max,s=e.split("\r\n"),d=i(s,"a=rtpmap","VP8/90000");if(d&&(n=o(s[d])),!n)return e;var c,u=i(s,"a=rtpmap","rtx/90000");if(u&&(c=o(s[u])),!u)return e;var l=i(s,"a=fmtp:"+c.toString());if(null!==l){var f="\r\n";f+="a=fmtp:"+n+" x-google-min-bitrate="+(r||"228")+"; x-google-max-bitrate="+(a||"228"),s[l]=s[l].concat(f),e=s.join("\r\n")}return e}(e,t)},setOpusAttributes:function(e,t){return function(e,t){t=t||{};var n,r=e.split("\r\n"),a=i(r,"a=rtpmap","opus/48000");if(a&&(n=o(r[a])),!n)return e;var s=i(r,"a=fmtp:"+n.toString());if(null===s)return e;var d="";return d+="; stereo="+(void 0!==t.stereo?t.stereo:"1"),d+="; sprop-stereo="+(void 0!==t["sprop-stereo"]?t["sprop-stereo"]:"1"),void 0!==t.maxaveragebitrate&&(d+="; maxaveragebitrate="+(t.maxaveragebitrate||1048576)),void 0!==t.maxplaybackrate&&(d+="; maxplaybackrate="+(t.maxplaybackrate||1048576)),void 0!==t.cbr&&(d+="; cbr="+(void 0!==t.cbr?t.cbr:"1")),void 0!==t.useinbandfec&&(d+="; useinbandfec="+t.useinbandfec),void 0!==t.usedtx&&(d+="; usedtx="+t.usedtx),void 0!==t.maxptime&&(d+="\r\na=maxptime:"+t.maxptime),r[s]=r[s].concat(d),e=r.join("\r\n")}(e,t)},preferVP9:function(t){return e(t,"vp9")},preferCodec:e,forceStereoAudio:function(e){for(var t=e.split("\r\n"),n=null,i=0;i<t.length;i++)if(-1!==t[i].search("opus/48000")){var o=extractSdp(t[i],/:(\d+) opus\/48000/i);break}for(i=0;i<t.length;i++)if(-1!==t[i].search("a=fmtp")&&extractSdp(t[i],/a=fmtp:(\d+)/)===o){n=i;break}return null===n?e:(t[n]=t[n].concat("; stereo=1; sprop-stereo=1"),e=t.join("\r\n"))}}}();window.BandwidthHandler=P;var O=function(){return{processCandidates:function(e,t){var n=t.candidate,i=e.candidates,o=i.stun,r=i.turn;if(g(i.reflexive)||(o=i.reflexive),g(i.relay)||(r=i.relay),(i.host||!n.match(/typ host/g))&&(r||!n.match(/typ relay/g))&&(o||!n.match(/typ srflx/g))){var a=e.iceProtocols;if((a.udp||!n.match(/ udp /g))&&(a.tcp||!n.match(/ tcp /g)))return e.enableLogs&&console.debug("Your candidate pairs:",n),{candidate:n,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex}}}}}(),D=function(){return{getIceServers:function(e){return[{urls:["stun:webrtcweb.com:7788"],username:"muazkh",credential:"muazkh"},{urls:["turn:webrtcweb.com:7788","turn:webrtcweb.com:8877","turn:webrtcweb.com:4455"],username:"muazkh",credential:"muazkh"},{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}]}}}();function L(e){if(!0!==currentUserMediaRequest.mutex){currentUserMediaRequest.mutex=!0;var t=JSON.stringify(e.localMediaConstraints);if(currentUserMediaRequest.streams[t])r(currentUserMediaRequest.streams[t].stream,!0);else{if(!!/BB10|BlackBerry/i.test(navigator.userAgent||"")||void 0===navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,void navigator.getUserMedia(e.localMediaConstraints,function(e){e.streamid=e.streamid||e.id||l(),e.idInstance=t,r(e)},function(t){e.onLocalMediaError(t,e.localMediaConstraints)});if(void 0===navigator.mediaDevices){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var n,i,o=function(){};navigator.mediaDevices={getUserMedia:function(e){return navigator.getUserMedia(e,function(e){e(stream),n=stream},function(e){o(e),i=e}),{then:function(e){if(!n)return e,{then:function(e){i?e(i):o=e}};e(n)}}}}}navigator.mediaDevices.getUserMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||l(),e.idInstance=t,r(e)}).catch(function(t){e.onLocalMediaError(t,e.localMediaConstraints)})}}else currentUserMediaRequest.queueRequests.push(e);function r(n,i){!function(e,t){e.mandatory&&e.mandatory.chromeMediaSource?t.isScreen=!0:e.mozMediaSource||e.mediaSource?t.isScreen=!0:e.video?t.isVideo=!0:e.audio&&(t.isAudio=!0)}(e.localMediaConstraints,n);var o="ended";"oninactive"in n&&(o="inactive"),n.addEventListener(o,function(){delete currentUserMediaRequest.streams[t],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(e)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(e)],currentUserMediaRequest.queueRequests=p(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[t]={stream:n},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&L(currentUserMediaRequest.queueRequests.shift()),e.onGettingLocalMedia(n,i)}}window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(e){this.mutex=!1;var t=this.streams[e];if(t){var n=(t=t.stream).currentUserMediaRequestOptions;this.queueRequests.indexOf(n)&&(delete this.queueRequests[this.queueRequests.indexOf(n)],this.queueRequests=p(this.queueRequests)),this.streams[e].stream=null,delete this.streams[e]}}};var N=function(){function e(e){if(e)return"string"==typeof e||void 0===e?e:e.audio&&e.video?null:e.audio?"audio":e.video?"video":void 0}return{setHandlers:function(t,n,i){if(t&&t.addEventListener){if(void 0===n||1==n){var o="ended";"oninactive"in t&&(o="inactive"),t.addEventListener(o,function(){N.onSyncNeeded(this.streamid,o)},!1)}t.mute=function(o,r){o=e(o),void 0!==r&&(n=r),void 0!==o&&"audio"!=o||S(t,"audio").forEach(function(e){e.enabled=!1,i.streamEvents[t.streamid].isAudioMuted=!0}),void 0!==o&&"video"!=o||S(t,"video").forEach(function(e){e.enabled=!1}),void 0!==n&&1!=n||N.onSyncNeeded(t.streamid,"mute",o),i.streamEvents[t.streamid].muteType=o||"both",c(t,"mute",o)},t.unmute=function(o,r){o=e(o),void 0!==r&&(n=r),function(){if(i.streamEvents[t.streamid].mediaElement){var e=i.streamEvents[t.streamid].mediaElement;e.volume=0,function e(t,n,i,o){(o=(o||0)+1)>=n||setTimeout(function(){i(),e(t,n,i,o)},t)}(200,5,function(){try{e.volume+=.2}catch(t){e.volume=1}})}}(),void 0!==o&&"audio"!=o||S(t,"audio").forEach(function(e){e.enabled=!0,i.streamEvents[t.streamid].isAudioMuted=!1}),void 0!==o&&"video"!=o||(S(t,"video").forEach(function(e){e.enabled=!0}),void 0!==o&&"video"==o&&i.streamEvents[t.streamid].isAudioMuted&&function e(n){n||(n=0),++n<100&&i.streamEvents[t.streamid].isAudioMuted&&(t.mute("audio"),setTimeout(function(){e(n)},50))}()),void 0!==n&&1!=n||N.onSyncNeeded(t.streamid,"unmute",o),i.streamEvents[t.streamid].unmuteType=o||"both",c(t,"unmute",o)}}},onSyncNeeded:function(e,t,n){}}}();window.addEventListener("message",function(e){e.origin==window.location.origin&&function(e){if("PermissionDeniedError"==e){if(B="PermissionDeniedError",U)return U("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==e&&(B="desktop");e.sourceId&&U&&U(I=e.sourceId,!0===e.canRequestAudioTrack)}(e.data)});var I,U,B="screen";function W(e){if(e){if("desktop"==B)return e(!0);window.postMessage("are-you-there","*"),setTimeout(function(){e("screen"!=B)},2e3)}}var V=void 0!==window.InstallTrigger,F=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;window.chrome;function G(e,t){if(V)return t("not-chrome");2!=arguments.length&&(t=e,e="ajhifddimkapgcifgcodmmfdlknahffk");var n=document.createElement("img");n.src="chrome-extension://"+e+"/icon.png",n.onload=function(){B="screen",window.postMessage("are-you-there","*"),setTimeout(function(){t("screen"==B?"installed-disabled":"installed-enabled")},2e3)},n.onerror=function(){t("not-installed")}}function q(e,t){if(V)return e(null,{mozMediaSource:"window",mediaSource:"window"});var n={mandatory:{chromeMediaSource:B,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};"desktop"!=B||I?("desktop"==B&&(n.mandatory.chromeMediaSourceId=I),e(null,n)):t?function(e){if(!e)throw'"callback" parameter is mandatory.';if(I)return e(I);U=e,window.postMessage("audio-plus-tab","*")}(function(t,i){n.mandatory.chromeMediaSourceId=t,i&&(n.canRequestAudioTrack=!0),e("PermissionDeniedError"==t?t:null,n)}):function(e){if(!e)throw'"callback" parameter is mandatory.';if(I)return e(I);U=e,window.postMessage("get-sourceId","*")}(function(t){n.mandatory.chromeMediaSourceId=t,e("PermissionDeniedError"==t?t:null,n)})}var _={send:function(e){var t=e.connection,n=e.channel,i=e.remoteUserId,o=e.text,r=t.chunkSize||1e3,a="",s=!1;(function(e){return"string"==typeof e})(o)||(s=!0,o=JSON.stringify(o));var d=l(),c=(new Date).getTime();!function e(o,u){var l={type:"text",uuid:d,sendingTime:c};o&&(u=o,l.packets=parseInt(u.length/r));u.length>r?l.message=u.slice(0,r):(l.message=u,l.last=!0,l.isobject=s);n.send(l,i);a=u.slice(l.message.length);a.length&&setTimeout(function(){e(null,a)},t.chunkInterval||100)}(o)}},j=function(){return{handle:function(e){var t={};e.onFileStart=function(n){var i=document.createElement("div");if(i.title=n.name,i.innerHTML="<label>0%</label> <progress></progress>",n.remoteUserId&&(i.innerHTML+=" (Sharing with:"+n.remoteUserId+")"),e.filesContainer||(e.filesContainer=document.body||document.documentElement),e.filesContainer.insertBefore(i,e.filesContainer.firstChild),!n.remoteUserId)return t[n.uuid]={div:i,progress:i.querySelector("progress"),label:i.querySelector("label")},void(t[n.uuid].progress.max=n.maxChunks);t[n.uuid]||(t[n.uuid]={}),t[n.uuid][n.remoteUserId]={div:i,progress:i.querySelector("progress"),label:i.querySelector("label")},t[n.uuid][n.remoteUserId].progress.max=n.maxChunks},e.onFileProgress=function(e){var n=t[e.uuid];n&&(e.remoteUserId&&!(n=t[e.uuid][e.remoteUserId])||(n.progress.value=e.currentPosition||e.maxChunks||n.progress.max,function(e,t){if(-1!==e.position){var n=+e.position.toFixed(2).split(".")[1]||100;t.innerHTML=n+"%"}}(n.progress,n.label)))},e.onFileEnd=function(e){var n=t[e.uuid];if(n){if(!e.remoteUserId||(n=t[e.uuid][e.remoteUserId])){var i=n.div;-1!=e.type.indexOf("image")?i.innerHTML='<a href="'+e.url+'" download="'+e.name+'">Download <strong style="color:red;">'+e.name+'</strong> </a><br /><img src="'+e.url+'" title="'+e.name+'" style="max-width: 80%;">':i.innerHTML='<a href="'+e.url+'" download="'+e.name+'">Download <strong style="color:red;">'+e.name+'</strong> </a><br /><iframe src="'+e.url+'" title="'+e.name+'" style="width: 80%;border: 0;height: inherit;margin-top:1em;"></iframe>'}}else console.error("No such progress-helper element exist.",e)}}}}(),H=function(){return{handle:function(e){e.autoTranslateText=!1,e.language="en",e.googKey="AIzaSyCgB5hmFY74WYB-EoWkhr9cAGr6TiTHrEE",e.Translator={TranslateText:function(t,n){var i=document.createElement("script");i.type="text/javascript";var o=encodeURIComponent(t),r="method"+e.token();window[r]=function(e){e.data&&e.data.translations[0]&&n?n(e.data.translations[0].translatedText):e.error&&"Daily Limit Exceeded"===e.error.message?console.error('Text translation failed. Error message: "Daily Limit Exceeded."'):e.error?console.error(e.error.message):console.error(e)};var a="https://www.googleapis.com/language/translate/v2?key="+e.googKey+"&target="+(e.language||"en-US")+"&callback=window."+r+"&q="+o;i.src=a,document.getElementsByTagName("head")[0].appendChild(i)},getListOfLanguages:function(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE){var e=JSON.parse(n.responseText);if(e&&e.data&&e.data.languages)return void t(e.data.languages);if(e.error&&"Daily Limit Exceeded"===e.error.message)return void console.error('Text translation failed. Error message: "Daily Limit Exceeded."');if(e.error)return void console.error(e.error.message);console.error(e)}};var i="https://www.googleapis.com/language/translate/v2/languages?key="+e.googKey+"&target=en";n.open("GET",i,!0),n.send(null)}}}}}();!function(e){a=a||{useDefaultDevices:!0},e.channel=e.sessionid=(r||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"";var t=new d(e),n={};function i(t){if(e.socketAutoReConnect=!0,e.socket)t&&t(e.socket);else{if(void 0===s)if("undefined"!=typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else{if("undefined"==typeof PubNubConnection)throw"SocketConnection.js seems missed.";window.SocketConnection=PubNubConnection}new s(e,function(n){t&&t(e.socket)})}}function o(n,i){e.socket.emit("join-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:p(),extra:e.extra,password:void 0!==e.password&&"object"!=typeof e.password?e.password:""},function(o,r){if(!0===o){if(e.enableLogs&&console.log("isRoomJoined: ",o," roomid: ",e.sessionid),e.peers[e.sessionid])return;t.onNegotiationNeeded(n)}!1===o&&e.enableLogs&&console.warn("isRoomJoined: ",r," roomid: ",e.sessionid),i(o,e.sessionid,r)})}function c(t){e.enableLogs&&console.log("Sending open-room signal to socket.io"),e.waitingForLocalMedia=!1,e.socket.emit("open-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:p(),extra:e.extra,identifier:e.publicRoomIdentifier,password:void 0!==e.password&&"object"!=typeof e.password?e.password:""},function(n,i){!0===n&&(e.enableLogs&&console.log("isRoomOpened: ",n," roomid: ",e.sessionid),t(n,e.sessionid)),!1===n&&(e.enableLogs&&console.warn("isRoomOpened: ",i," roomid: ",e.sessionid),t(n,e.sessionid,i))})}function p(){try{return e.streamEvents.selectAll("local").map(function(e){return{streamid:e.streamid,tracks:e.stream.getTracks().length}})}catch(e){return[]}}function g(n,i){if(e.dontCaptureUserMedia||n.isDataOnly)i();else{var o={};n.localPeerSdpConstraints.OfferToReceiveAudio&&(o.audio=e.mediaConstraints.audio),n.localPeerSdpConstraints.OfferToReceiveVideo&&(o.video=e.mediaConstraints.video);var r=n.session||e.session;r.oneway&&"two-way"!==r.audio&&"two-way"!==r.video&&"two-way"!==r.screen?i():(r.oneway&&r.audio&&"two-way"===r.audio&&(r={audio:!0}),(r.audio||r.video||r.screen)&&(r.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:w(e)}).then(function(n){n.isScreen=!0,t.onGettingLocalMedia(n),!r.audio&&!r.video||w(e)?i(n):e.invokeGetUserMedia(null,i)},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(t,n){e.invokeGetUserMedia({audio:!!w(e)&&b(n),video:n,isScreen:!0},!r.audio&&!r.video||w(e)?i:e.invokeGetUserMedia(null,i))}):(r.audio||r.video)&&e.invokeGetUserMedia(null,i,r)))}}function C(t,n){t?(n.audio&&S(t,"audio").forEach(function(e){e.applyConstraints(n.audio)}),n.video&&S(t,"video").forEach(function(e){e.applyConstraints(n.video)})):e.enableLogs&&console.error("No stream to applyConstraints.")}function k(n,i,o){i?t.replaceTrack(n,i,o):e.peers.getAllParticipants().forEach(function(e){t.replaceTrack(n,e,o)})}t.onGettingLocalMedia=function(t,i){if(i=i||function(){},n[t.streamid])i();else{n[t.streamid]=!0;try{t.type="local"}catch(e){}e.setStreamEndHandler(t),f(t,function(n){n.id=t.streamid,n.muted=!0,n.volume=0,-1===e.attachStreams.indexOf(t)&&e.attachStreams.push(t),void 0!==N&&N.setHandlers(t,!0,e),e.streamEvents[t.streamid]={stream:t,type:"local",mediaElement:n,userid:e.userid,extra:e.extra,streamid:t.streamid,isAudioMuted:!0};try{!function(e,t){if(t.stream&&S(t.stream,"audio").length){if(!e||!t)throw"Both arguments are required.";if(e.onspeaking&&e.onsilence){if("undefined"==typeof hark)throw"hark.js not found.";hark(t.stream,{onspeaking:function(){e.onspeaking(t)},onsilence:function(){e.onsilence(t)},onvolumechange:function(n,i){e.onvolumechange&&e.onvolumechange(merge({volume:n,threshold:i},t))}})}}}(e,e.streamEvents[t.streamid]),u(e,e.streamEvents[t.streamid]),e.onstream(e.streamEvents[t.streamid])}catch(e){}i()},e)}},t.onGettingRemoteMedia=function(t,n){try{t.type="remote"}catch(e){}e.setStreamEndHandler(t,"remote-stream"),f(t,function(i){i.id=t.streamid,void 0!==N&&N.setHandlers(t,!1,e),e.streamEvents[t.streamid]={stream:t,type:"remote",userid:n,extra:e.peers[n]?e.peers[n].extra:{},mediaElement:i,streamid:t.streamid},u(e,e.streamEvents[t.streamid]),e.onstream(e.streamEvents[t.streamid])},e)},t.onRemovingRemoteMedia=function(t,n){var i=e.streamEvents[t.streamid];i||(i={stream:t,type:"remote",userid:n,extra:e.peers[n]?e.peers[n].extra:{},streamid:t.streamid,mediaElement:e.streamEvents[t.streamid]?e.streamEvents[t.streamid].mediaElement:null}),e.peersBackup[i.userid]&&(i.extra=e.peersBackup[i.userid].extra),e.onstreamended(i),delete e.streamEvents[t.streamid]},t.onNegotiationNeeded=function(t,n,o){o=o||function(){};var r={remoteUserId:n=n||t.remoteUserId,message:t=t||"",sender:e.userid};t.remoteUserId&&t.message&&t.sender&&(r=t),i(function(){e.socket.emit(e.socketMessageEvent,r,o)})},t.onUserLeft=function(t){e.deletePeer(t)},t.disconnectWith=function(t,n){e.socket&&e.socket.emit("disconnect-with",t,n||function(){}),e.deletePeer(t)},e.socketOptions={transport:"polling"},e.openOrJoin=function(t,n){n=n||function(){},e.checkPresence(t,function(t,i){if(t){e.sessionid=i;var r,a,s=!!e.session.oneway,d=v(e.session);a={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},r={OfferToReceiveAudio:s?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:s?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo};var u={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:s,isDataOnly:d,localPeerSdpConstraints:r,remotePeerSdpConstraints:a},sender:e.userid};g(u.message,function(){o(u,n)})}else e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=i||e.sessionid,v(e.session)?c(n):e.captureUserMedia(function(){c(n)})})},e.waitingForLocalMedia=!1,e.open=function(t,n){n=n||function(){},e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=t||e.sessionid,i(function(){v(e.session)?c(n):e.captureUserMedia(function(){c(n)})})},e.peersBackup={},e.deletePeer=function(t){if(t&&e.peers[t]){var n={userid:t,extra:e.peers[t]?e.peers[t].extra:{}};if(e.peersBackup[n.userid]&&(n.extra=e.peersBackup[n.userid].extra),e.onleave(n),e.peers[t]){e.peers[t].streams.forEach(function(e){e.stop()});var i=e.peers[t].peer;if(i&&"closed"!==i.iceConnectionState)try{i.close()}catch(e){}e.peers[t]&&(e.peers[t].peer=null,delete e.peers[t])}}},e.rejoin=function(t){if(!e.isInitiator&&t&&Object.keys(t).length){var n={};e.peers[t.remoteUserId]&&(n=e.peers[t.remoteUserId].extra,e.deletePeer(t.remoteUserId)),t&&t.remoteUserId&&(e.join(t.remoteUserId),e.onReConnecting({userid:t.remoteUserId,extra:n}))}},e.join=function(t,n){e.sessionid=!!t&&(t.sessionid||t.remoteUserId||t)||e.sessionid,e.sessionid+="";var r=!1,a=!1,s=!1,d=!1;if(t&&t.session||!t||"string"==typeof t){var c=t&&t.session||e.session;s=!!c.oneway,d=v(c),a={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},r={OfferToReceiveAudio:s?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:s?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo}}var u=function(){};"function"==typeof(n=n||{})&&(u=n,n={}),void 0!==n.localPeerSdpConstraints&&(r=n.localPeerSdpConstraints),void 0!==n.remotePeerSdpConstraints&&(a=n.remotePeerSdpConstraints),void 0!==n.isOneWay&&(s=n.isOneWay),void 0!==n.isDataOnly&&(d=n.isDataOnly);var l={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:s,isDataOnly:d,localPeerSdpConstraints:r,remotePeerSdpConstraints:a},sender:e.userid};return g(l.message,function(){i(function(){o(l,u)})}),l},e.publicRoomIdentifier="",e.getUserMedia=e.captureUserMedia=function(n,i){n=n||function(){};var o=i||e.session;e.dontCaptureUserMedia||v(o)?n():(o.audio||o.video||o.screen)&&(o.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:w(e)}).then(function(r){if(r.isScreen=!0,t.onGettingLocalMedia(r),!o.audio&&!o.video||w(e))n(r);else{var a={};for(var s in o)"screen"!==s&&(a[s]=o[s]);e.invokeGetUserMedia(i,n,a)}},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(t,r){if(t)throw t;e.invokeGetUserMedia({audio:!!w(e)&&b(r),video:r,isScreen:!0},function(t){if(!o.audio&&!o.video||w(e))n(t);else{var r={};for(var a in o)"screen"!==a&&(r[a]=o[a]);e.invokeGetUserMedia(i,n,r)}})}):(o.audio||o.video)&&e.invokeGetUserMedia(i,n,o))},e.onbeforeunload=function(n,i){e.closeBeforeUnload&&(e.peers.getAllParticipants().forEach(function(n){t.onNegotiationNeeded({userLeft:!0},n),e.peers[n]&&e.peers[n].peer&&e.peers[n].peer.close(),delete e.peers[n]}),i||e.closeSocket(),e.isInitiator=!1)},window.ignoreBeforeUnload?e.closeBeforeUnload=!1:(e.closeBeforeUnload=!0,window.addEventListener("beforeunload",e.onbeforeunload,!1)),e.userid=l(),e.changeUserId=function(t,n){n=n||function(){},e.userid=t||l(),e.socket.emit("changed-uuid",e.userid,n)},e.extra={},e.attachStreams=[],e.session={audio:!0,video:!0},e.enableFileSharing=!1,e.bandwidth={screen:!1,audio:!1,video:!1},e.codecs={audio:"opus",video:"VP9"},e.processSdp=function(t){return y()?t:"Safari"===DetectRTC.browser.name?t:("VP8"===e.codecs.video.toUpperCase()&&(t=P.preferCodec(t,"vp8")),"VP9"===e.codecs.video.toUpperCase()&&(t=P.preferCodec(t,"vp9")),"H264"===e.codecs.video.toUpperCase()&&(t=P.preferCodec(t,"h264")),"G722"===e.codecs.audio&&(t=P.removeNonG722(t)),"Firefox"===DetectRTC.browser.name?t:((e.bandwidth.video||e.bandwidth.screen)&&(t=P.setApplicationSpecificBandwidth(t,e.bandwidth,!!e.session.screen)),e.bandwidth.video&&(t=P.setVideoBitrates(t,{min:8*e.bandwidth.video*1024,max:8*e.bandwidth.video*1024})),e.bandwidth.audio&&(t=P.setOpusAttributes(t,{maxaveragebitrate:8*e.bandwidth.audio*1024,maxplaybackrate:8*e.bandwidth.audio*1024,stereo:1,maxptime:3})),t))},void 0!==P&&(e.BandwidthHandler=e.CodecsHandler=P),e.mediaConstraints={audio:{mandatory:{},optional:e.bandwidth.audio?[{bandwidth:8*e.bandwidth.audio*1024||1048576}]:[]},video:{mandatory:{},optional:e.bandwidth.video?[{bandwidth:8*e.bandwidth.video*1024||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(e.mediaConstraints={audio:!0,video:!0}),a.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){var t,n;if(DetectRTC.MediaDevices.forEach(function(i){"audioinput"===i.kind&&!1!==e.mediaConstraints.audio&&(t=i),"videoinput"===i.kind&&!1!==e.mediaConstraints.video&&(n=i)}),t){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.audio?e.mediaConstraints.audio.deviceId=t.id:e.mediaConstraints.audio={deviceId:t.id});1==e.mediaConstraints.audio&&(e.mediaConstraints.audio={mandatory:{},optional:[]}),e.mediaConstraints.audio.optional||(e.mediaConstraints.audio.optional=[]);var i=[{sourceId:t.id}];e.mediaConstraints.audio.optional=i.concat(e.mediaConstraints.audio.optional)}if(n){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.video?e.mediaConstraints.video.deviceId=n.id:e.mediaConstraints.video={deviceId:n.id});1==e.mediaConstraints.video&&(e.mediaConstraints.video={mandatory:{},optional:[]}),e.mediaConstraints.video.optional||(e.mediaConstraints.video.optional=[]);i=[{sourceId:n.id}];e.mediaConstraints.video.optional=i.concat(e.mediaConstraints.video.optional)}}),e.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},e.sdpSemantics=null,e.iceCandidatePoolSize=null,e.bundlePolicy=null,e.rtcpMuxPolicy=null,e.iceTransportPolicy=null,e.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},e.iceServers=D.getIceServers(e),e.candidates={host:!0,stun:!0,turn:!0},e.iceProtocols={tcp:!0,udp:!0},e.onopen=function(t){e.enableLogs&&console.info("Data connection has been opened between you & ",t.userid)},e.onclose=function(t){e.enableLogs&&console.warn("Data connection has been closed between you & ",t.userid)},e.onerror=function(t){e.enableLogs&&console.error(t.userid,"data-error",t)},e.onmessage=function(t){e.enableLogs&&console.debug("data-message",t.userid,t.data)},e.send=function(t,n){e.peers.send(t,n)},e.close=e.disconnect=e.leave=function(){e.onbeforeunload(!1,!0)},e.closeEntireSession=function(t){t=t||function(){},e.socket.emit("close-entire-session",function n(){e.getAllParticipants().length?setTimeout(n,100):(e.onEntireSessionClosed({sessionid:e.sessionid,userid:e.userid,extra:e.extra}),e.changeUserId(null,function(){e.close(),t()}))})},e.onEntireSessionClosed=function(t){e.enableLogs&&console.info("Entire session is closed: ",t.sessionid,t.extra)},e.onstream=function(t){var n=e.videosContainer;n.insertBefore(t.mediaElement,n.firstChild);var i=t.mediaElement.play();void 0===i?setTimeout(function(){t.mediaElement.play()},2e3):i.catch(function(){}).then(function(){setTimeout(function(){t.mediaElement.play()},2e3)})},e.onstreamended=function(e){e.mediaElement||(e.mediaElement=document.getElementById(e.streamid)),e.mediaElement&&e.mediaElement.parentNode&&e.mediaElement.parentNode.removeChild(e.mediaElement)},e.direction="many-to-many",e.removeStream=function(t,n){var i;e.attachStreams.forEach(function(e){e.id===t&&(i=e)}),i?(e.peers.getAllParticipants().forEach(function(t){if(!n||t===n){var o=e.peers[t];try{o.peer.removeStream(i)}catch(e){}}}),e.renegotiate()):console.warn("No such stream exist.",t)},e.addStream=function(n,i){if(n.getTracks)return-1===e.attachStreams.indexOf(n)&&(n.streamid||(n.streamid=n.id),e.attachStreams.push(n)),void e.renegotiate(i);function o(t){n.streamCallback&&n.streamCallback(t),e.renegotiate(i)}v(n)?e.renegotiate(i):(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:w(e)}).then(function(i){i.isScreen=!0,t.onGettingLocalMedia(i),!n.audio&&!n.video||w(e)?o(i):e.invokeGetUserMedia(null,function(e){o(e)})},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(t,i){if(t)return"PermissionDeniedError"===t?(n.streamCallback&&n.streamCallback(null),void(e.enableLogs&&console.error("User rejected to share his screen."))):alert(t);e.invokeGetUserMedia({audio:!!w(e)&&b(i),video:i,isScreen:!0},function(t){!n.audio&&!n.video||w(e)?o(t):e.invokeGetUserMedia(null,function(e){o(e)})})}):(n.audio||n.video)&&e.invokeGetUserMedia(null,o))},e.invokeGetUserMedia=function(n,i,o){o||(o=e.session),n||(n=e.mediaConstraints),L({onGettingLocalMedia:function(e){var o=n.video;o&&(o.mediaSource||o.mozMediaSource?e.isScreen=!0:o.mandatory&&o.mandatory.chromeMediaSource&&(e.isScreen=!0)),e.isScreen||(e.isVideo=!!S(e,"video").length,e.isAudio=!e.isVideo&&S(e,"audio").length),t.onGettingLocalMedia(e,function(){"function"==typeof i&&i(e)})},onLocalMediaError:function(e,n){t.onLocalMediaError(e,n)},localMediaConstraints:n||{audio:!!o.audio&&n.audio,video:!!o.video&&n.video}})},e.applyConstraints=function(t,n){if(E&&E.prototype.applyConstraints){var i;if(n)return e.streamEvents[n]&&(i=e.streamEvents[n].stream),void C(i,t);e.attachStreams.forEach(function(e){C(e,t)})}else alert("track.applyConstraints is NOT supported in your browser.")},e.replaceTrack=function(n,i,o){if(n=n||{},A.prototype.getSenders)if(n instanceof E)k(n,i,o);else{if(n instanceof h)return S(n,"video").length&&k(S(n,"video")[0],i,!0),void(S(n,"audio").length&&k(S(n,"audio")[0],i,!1));if(v(n))throw"connection.replaceTrack requires audio and/or video and/or screen.";(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:w(e)}).then(function(i){i.isScreen=!0,t.onGettingLocalMedia(i),!n.audio&&!n.video||w(e)?r(i):e.invokeGetUserMedia(null,r)},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(t,i){if(t)return alert(t);e.invokeGetUserMedia({audio:!!w(e)&&b(i),video:i,isScreen:!0},!n.audio&&!n.video||w(e)?r:e.invokeGetUserMedia(null,r))}):(n.audio||n.video)&&e.invokeGetUserMedia(null,r))}else e.addStream(n);function r(t){e.replaceTrack(t,i,o||n.video||n.screen)}},e.resetTrack=function(t,n){t||(t=e.getAllParticipants()),"string"==typeof t&&(t=[t]),t.forEach(function(t){var i=e.peers[t].peer;void 0!==n&&!0!==n||!i.lastVideoTrack||e.replaceTrack(i.lastVideoTrack,t,!0),void 0!==n&&!1!==n||!i.lastAudioTrack||e.replaceTrack(i.lastAudioTrack,t,!1)})},e.renegotiate=function(n){n?t.renegotiatePeer(n):e.peers.getAllParticipants().forEach(function(e){t.renegotiatePeer(e)})},e.setStreamEndHandler=function(t,n){if(t&&t.addEventListener&&(n=!!n,!t.alreadySetEndHandler)){t.alreadySetEndHandler=!0;var i="ended";"oninactive"in t&&(i="inactive"),t.addEventListener(i,function(){if(t.idInstance&&currentUserMediaRequest.remove(t.idInstance),!n){var i=[];e.attachStreams.forEach(function(e){e.id!=t.id&&i.push(e)}),e.attachStreams=i}var o=e.streamEvents[t.streamid];if(o||(o={stream:t,streamid:t.streamid,type:n?"remote":"local",userid:e.userid,extra:e.extra,mediaElement:e.streamEvents[t.streamid]?e.streamEvents[t.streamid].mediaElement:null}),n&&e.peers[o.userid]){i=[];e.peers[o.userid].peer.getRemoteStreams().forEach(function(e){e.id!=t.id&&i.push(e)}),e.peers[o.userid].streams=i}o.userid===e.userid&&"remote"===o.type||(e.peersBackup[o.userid]&&(o.extra=e.peersBackup[o.userid].extra),e.onstreamended(o),delete e.streamEvents[t.streamid])},!1)}},e.onMediaError=function(t,n){e.enableLogs&&console.error(t,n)},e.autoCloseEntireSession=!1,e.filesContainer=e.videosContainer=document.body||document.documentElement,e.isInitiator=!1,e.shareFile=t.shareFile,void 0!==j&&j.handle(e),void 0!==H&&H.handle(e),e.token=l,e.onNewParticipant=function(t,n){e.acceptParticipationRequest(t,n)},e.acceptParticipationRequest=function(e,n){n.successCallback&&(n.successCallback(),delete n.successCallback),t.createNewPeer(e,n)},void 0!==N&&(e.StreamsHandler=N),e.onleave=function(e){},e.invokeSelectFileDialog=function(e){var t=new FileSelector;t.accept="*.*",t.selectSingleFile(e)},e.onmute=function(e){if(e&&e.mediaElement)if("both"===e.muteType||"video"===e.muteType){e.mediaElement.src=null;var t=e.mediaElement.pause();void 0!==t?t.then(function(){e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}):e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}else"audio"===e.muteType&&(e.mediaElement.muted=!0)},e.onunmute=function(e){e&&e.mediaElement&&e.stream&&("both"===e.unmuteType||"video"===e.unmuteType?(e.mediaElement.poster=null,e.mediaElement.srcObject=e.stream,e.mediaElement.play()):"audio"===e.unmuteType&&(e.mediaElement.muted=!1))},e.onExtraDataUpdated=function(t){t.status="online",e.onUserStatusChanged(t,!0)},e.getAllParticipants=function(t){return e.peers.getAllParticipants(t)},void 0!==N&&(N.onSyncNeeded=function(n,i,o){e.peers.getAllParticipants().forEach(function(e){t.onNegotiationNeeded({streamid:n,action:i,streamSyncNeeded:!0,type:o||"both"},e)})}),e.connectSocket=function(e){i(e)},e.closeSocket=function(){try{io.sockets={}}catch(e){}e.socket&&("function"==typeof e.socket.disconnect&&e.socket.disconnect(),"function"==typeof e.socket.resetProps&&e.socket.resetProps(),e.socket=null)},e.getSocket=function(t){return!t&&e.enableLogs&&console.warn("getSocket.callback paramter is required."),t=t||function(){},e.socket?t(e.socket):i(function(){t(e.socket)}),e.socket},e.getRemoteStreams=t.getRemoteStreams;var R=["selectFirst","selectAll","forEach"];if(e.streamEvents={selectFirst:function(t){return e.streamEvents.selectAll(t)[0]},selectAll:function(t){t||(t={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==t&&(t={local:!0}),"remote"==t&&(t={remote:!0}),"screen"==t&&(t={isScreen:!0}),"audio"==t&&(t={isAudio:!0}),"video"==t&&(t={isVideo:!0});var n=[];return Object.keys(e.streamEvents).forEach(function(i){var o=e.streamEvents[i];if(-1===R.indexOf(i)){var r=!0;t.local&&"local"===o.type&&(r=!1),t.remote&&"remote"===o.type&&(r=!1),t.isScreen&&o.stream.isScreen&&(r=!1),t.isVideo&&o.stream.isVideo&&(r=!1),t.isAudio&&o.stream.isAudio&&(r=!1),t.userid&&o.userid===t.userid&&(r=!1),!1===r&&n.push(o)}}),n}},e.socketURL="/",e.socketMessageEvent="RTCMultiConnection-Message",e.socketCustomEvent="RTCMultiConnection-Custom-Message",e.DetectRTC=DetectRTC,e.setCustomSocketEvent=function(t){t&&(e.socketCustomEvent=t),e.socket&&e.socket.emit("set-custom-socket-event-listener",e.socketCustomEvent)},e.getNumberOfBroadcastViewers=function(t,n){e.socket&&t&&n&&e.socket.emit("get-number-of-users-in-specific-broadcast",t,n)},e.onNumberOfBroadcastViewersUpdated=function(t){e.enableLogs&&e.isInitiator&&console.info("Number of broadcast (",t.broadcastId,") viewers",t.numberOfBroadcastViewers)},e.onUserStatusChanged=function(t,n){e.enableLogs&&!n&&console.info(t.userid,t.status)},e.getUserMediaHandler=L,e.multiPeersHandler=t,e.enableLogs=!0,e.setCustomSocketHandler=function(e){void 0!==s&&(s=e)},e.chunkSize=4e4,e.maxParticipantsAllowed=1e3,e.disconnectWith=t.disconnectWith,e.checkPresence=function(t,n){t=t||e.sessionid,"SSEConnection"!==s.name?e.socket?e.socket.emit("check-presence",t+"",function(t,i,o){e.enableLogs&&console.log("checkPresence.isRoomExist: ",t," roomid: ",i),n(t,i,o)}):e.connectSocket(function(){e.checkPresence(t,n)}):SSEConnection.checkPresence(t,function(t,i,o){if(!e.socket)return t||(e.userid=i),void e.connectSocket(function(){n(t,i,o)});n(t,i)})},e.onReadyForOffer=function(t,n){e.multiPeersHandler.createNewPeer(t,n)},e.setUserPreferences=function(t){return e.dontAttachStream&&(t.dontAttachLocalStream=!0),e.dontGetRemoteStream&&(t.dontGetRemoteStream=!0),t},e.updateExtraData=function(){e.socket.emit("extra-data-updated",e.extra)},e.enableScalableBroadcast=!1,e.maxRelayLimitPerUser=3,e.dontCaptureUserMedia=!1,e.dontAttachStream=!1,e.dontGetRemoteStream=!1,e.onReConnecting=function(t){e.enableLogs&&console.info("ReConnecting with",t.userid,"...")},e.beforeAddingStream=function(e){return e},e.beforeRemovingStream=function(e){return e},e.checkIfChromeExtensionAvailable=W,"undefined"!=typeof isFirefoxExtensionAvailable&&(e.checkIfChromeExtensionAvailable=isFirefoxExtensionAvailable),e.getChromeExtensionStatus=G,e.getScreenConstraints=function(t,n){w(e,n)&&(n=!0),q(function(n,i){n||(i=e.modifyScreenConstraints(i),t(n,i))},n)},e.modifyScreenConstraints=function(e){return e},e.onPeerStateChanged=function(t){e.enableLogs&&-1!==t.iceConnectionState.search(/closed|failed/gi)&&console.error("Peer connection is closed between you & ",t.userid,t.extra,"state:",t.iceConnectionState)},e.isOnline=!0,m("online",function(){e.isOnline=!0}),m("offline",function(){e.isOnline=!1}),e.isLowBandwidth=!1,navigator&&navigator.connection&&navigator.connection.type&&(e.isLowBandwidth=-1!==navigator.connection.type.toString().toLowerCase().search(/wifi|cell/g),e.isLowBandwidth)){if(e.bandwidth={audio:!1,video:!1,screen:!1},e.mediaConstraints.audio&&e.mediaConstraints.audio.optional&&e.mediaConstraints.audio.optional.length){var x=[];e.mediaConstraints.audio.optional.forEach(function(e){void 0===e.bandwidth&&x.push(e)}),e.mediaConstraints.audio.optional=x}if(e.mediaConstraints.video&&e.mediaConstraints.video.optional&&e.mediaConstraints.video.optional.length){x=[];e.mediaConstraints.video.optional.forEach(function(e){void 0===e.bandwidth&&x.push(e)}),e.mediaConstraints.video.optional=x}}e.getExtraData=function(t,n){if(!t)throw"remoteUserId is required.";if("function"!=typeof n)return e.peers[t]?e.peers[t].extra:e.peersBackup[t]?e.peersBackup[t].extra:{};e.socket.emit("get-remote-user-extra-data",t,function(e,t,i){n(e,t,i)})},a.autoOpenOrJoin&&e.openOrJoin(e.sessionid),e.onUserIdAlreadyTaken=function(t,n){e.close(),e.closeSocket(),e.isInitiator=!1,e.userid=e.token(),e.join(e.sessionid),e.enableLogs&&console.warn("Userid already taken.",t,"Your new userid:",e.userid)},e.trickleIce=!0,e.version="3.6.8",e.onSettingLocalDescription=function(t){e.enableLogs&&console.info("Set local description for remote user",t.userid)},e.resetScreen=function(){I=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},e.autoCreateMediaElement=!0,e.password=null,e.setPassword=function(t,n){n=n||function(){},e.socket?e.socket.emit("set-password",t,n):(e.password=t,n(!0,e.sessionid,null))},e.onSocketDisconnect=function(t){e.enableLogs&&console.warn("socket.io connection is closed")},e.onSocketError=function(t){e.enableLogs&&console.warn("socket.io connection is failed")},e.errors={ROOM_NOT_AVAILABLE:"Room not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"Room permission denied",ROOM_FULL:"Room full",DID_NOT_JOIN_ANY_ROOM:"Did not join any room yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}}(this)};e.exports=t=r,void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}).call(this,n("yLpj"),n("8oxB"))}}]);